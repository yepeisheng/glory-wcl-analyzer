(function(e){function t(t){for(var i,l,n=t[0],o=t[1],d=t[2],u=0,p=[];u<n.length;u++)l=n[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,n=1;n<a.length;n++){var o=a[n];0!==r[o]&&(i=!1)}i&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},r={app:0},s=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var c=o;s.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("56d7")},2:function(e,t){},3:function(e,t){},"31ed":function(e,t,a){"use strict";var i=a("8e4e"),r=a.n(i);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=a("ce5b"),s=a.n(r),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.title)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.openSetting=!e.openSetting}}},[a("v-icon",[e._v("mdi-settings-box")])],1)],1),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{"max-width":"1000"},model:{value:e.openTable,callback:function(t){e.openTable=t},expression:"openTable"}},[a("wcl-table",{attrs:{table:e.table}})],1),a("v-slide-y-transition",[a("setting",{directives:[{name:"show",rawName:"v-show",value:e.openSetting,expression:"openSetting"}]})],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:!e.openSetting,expression:"!openSetting"}]},[a("v-col",{staticClass:"col-5 offset-3"},[a("v-text-field",{attrs:{loading:e.loading,disabled:e.loading,label:"wcl report id"},model:{value:e.reportId,callback:function(t){e.reportId=t},expression:"reportId"}})],1),a("v-col",{attrs:{"align-self":"center"}},[a("v-btn",{attrs:{disabled:e.loading},on:{click:e.fetchReport}},[e._v("Fetch")])],1)],1),!e.openSetting&&e.scores.length>0?[a("v-row",[a("v-tabs",{model:{value:e.selectedClassIndex,callback:function(t){e.selectedClassIndex=t},expression:"selectedClassIndex"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),e._l(e.classes,(function(t){return a("v-tab",{key:t.code},[a("span",{style:{color:t.color}},[e._v(" "+e._s(t.display)+" ")])])}))],2)],1),a("v-row",[a("v-col",[a("score-table",{attrs:{scores:e.scores.find((function(t){return t.classType===e.selectedClass})).scores,"report-id":e.reportId,"class-type":e.selectedClass},on:{openTable:e.openTablePanel}})],1)],1)]:e._e()],2)],1),a("v-footer",{attrs:{app:""}},[e._v(" "+e._s(e.footer)+" ")])],1)},n=[],o=(a("99af"),a("4de4"),a("7db0"),a("a630"),a("a15b"),a("d81d"),a("13d5"),a("d3b7"),a("07ac"),a("6062"),a("3ca3"),a("ddb0"),a("2909")),d=(a("96cf"),a("1da1")),c=a("5530"),u=a("40dc"),p=a("2fa4"),m=a("0789"),b=a("2a7f"),f=a("a523"),T=a("f6c4"),E=a("553a"),h=a("8654"),O=a("8336"),g=a("132d"),y=a("2f62"),I="2dd31d65c33dabb5d269c9d24c4a14ed",A="api_key=".concat(I,"&translate=true"),v="https://cn.classic.warcraftlogs.com/v1",_={SUMMARY:"summary",DAMAGE:"damage-done",DAMAGE_TAKEN:"damage-taken",HEALING:"healing",CASTS:"casts",SUMMONS:"summons",BUFFS:"buffs",DEBUFFS:"debuffs",DEATHS:"deaths",SURVIVABILITY:"survivability",RESOURCES:"resources",RESOURCE_GAINS:"resources-gains"},S={OVERALL:"全程",BEFORE_ONE:"四狗+三鸡",ONE:"预言者斯克拉姆",BEFORE_TWO:"三宝前",TWO:"安其拉三宝",BEFORE_THREE:"通道虫",THREE:"沙尔图拉",BEFORE_FOUR:"陷阱房",FOUR:"顽强的范克瑞斯",FIVE:"维希度斯",BEFORE_SIX:"蜜蜂房",SIX:"哈霍兰公主",BEFORE_SEVEN:"五狗",SEVEN:"双子皇帝",BEFORE_EIGHT:"天堂之路",EIGHT:"奥罗",NINE:"克苏恩"},R={TOTAL:"total",HIT:"hitCount",BUFF_TOTAL:"totalUses",BUFF_UPTIME:"totalUptime"},N={total:"总数值",hitCount:"命中数",totalUses:"BUFF数"};function L(e){return V.apply(this,arguments)}function V(){return V=Object(d["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/report/fights/").concat(t,"?").concat(A));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function w(e,t,a,i,r,s){return x.apply(this,arguments)}function x(){return x=Object(d["a"])(regeneratorRuntime.mark((function e(t,a,i,r,s,l){var n,o,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=A,l["abilityId"]&&(n="".concat(n,"&abilityid=").concat(l["abilityId"])),l["customQuery"]&&(n="".concat(n,"&").concat(l["customQuery"])),e.next=5,fetch("".concat(v,"/report/tables/").concat(a,"/").concat(t,"?start=").concat(i,"&end=").concat(r,"&").concat(n));case 5:return o=e.sent,e.next=8,o.json();case 8:if(d=e.sent,a!==_.DEBUFFS){e.next=11;break}return e.abrupt("return",d);case 11:return e.abrupt("return",(a===_.BUFFS?d["auras"]:d["entries"]).map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{total:e[s]})})));case 12:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function C(e){var t;return Object.values((t=[]).concat.apply(t,Object(o["a"])(e)).reduce((function(e,t){return void 0===e[t.id]?e[t.id]=t:e[t.id].total+=t.total,e}),{}))}function F(e){var t;return Object.values((t=[]).concat.apply(t,Object(o["a"])(e)).reduce((function(e,t){return void 0===e[t.id]?e[t.id]=Object(c["a"])(Object(c["a"])({},t),{},{total:1}):e[t.id].total+=1,e}),{}))}function M(e,t,a){var i=a.map((function(e){return e["end_time"]-e["start_time"]})).reduce((function(e,t){return e+t}),0),r=e.map((function(e,a){return{id:e,total:t[a]["auras"].map((function(e){return e.bands.map((function(e){return e["endTime"]-e["startTime"]})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0)/i}}));return r}var G={DEBUFF:"special_debuff",RELATIVE_TO_TOP:"to_top",RELATIVE_TO_MAX:"to_max",RELATIVE_TO_MIN:"to_min",RELATIVE_TO_AVG:"to_avg",RELATIVE_TO_TOTAL:"to_total",UNITARY:"unitary"},k={special_debuff:"DEBUFF覆盖率",to_top:"相对于第一名",to_max:"相对于最大值",to_min:"达到最小值与否",to_avg:"相对于平均",to_total:"相对于总数",unitary:"转换成0或1"};function U(e){var t=e.reduce((function(e,t){return t.weight>0?e+t.weight:e}),0),a=e.map((function(e){var a=e.subGroups.reduce((function(e,t){return t.weight>0?e+t.weight:e}),0);return Object(c["a"])(Object(c["a"])({},e),{},{weight:e.weight/t,subGroups:e.subGroups.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{weight:e.weight/a})}))})}));return a}var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"settings",attrs:{elevation:"4",width:"100%"}},[a("v-toolbar",{scopedSlots:e._u([{key:"extension",fn:function(){return[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",[e._v("表格")]),a("v-tab",[e._v("考核公式")])],1)]},proxy:!0}])},[a("v-toolbar-title",[e._v(" 设置 ")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("table-setting")],1),a("v-tab-item",[a("formula-setting")],1)],1)],1)},j=[],P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:e.tableEditor,callback:function(t){e.tableEditor=t},expression:"tableEditor"}},[a("v-card",[a("v-card-title",[e._v("表格")]),a("v-card-text",[a("v-text-field",{attrs:{label:"表格名称"},model:{value:e.editTable.displayName,callback:function(t){e.$set(e.editTable,"displayName",t)},expression:"editTable.displayName"}}),a("v-select",{attrs:{label:"表格类型",items:e.tableTypeSelect},model:{value:e.editTable.tableName,callback:function(t){e.$set(e.editTable,"tableName",t)},expression:"editTable.tableName"}}),a("v-select",{attrs:{label:"战斗",items:e.fightSelect},model:{value:e.editTable.fights,callback:function(t){e.$set(e.editTable,"fights",t)},expression:"editTable.fights"}}),a("v-select",{attrs:{label:"表格列",items:e.columnSelect},model:{value:e.editTable.column,callback:function(t){e.$set(e.editTable,"column",t)},expression:"editTable.column"}}),a("v-text-field",{attrs:{label:"法术ID",rules:[function(){return 0===e.editTable.abilityIds.length||e.editTable.abilityIds.split(",").every((function(e){return!isNaN(parseInt(e))}))||"必须为以,隔开的数字"}]},model:{value:e.editTable.abilityIds,callback:function(t){e.$set(e.editTable,"abilityIds",t)},expression:"editTable.abilityIds"}}),a("v-text-field",{attrs:{label:"自定义参数"},model:{value:e.editTable.customQuery,callback:function(t){e.$set(e.editTable,"customQuery",t)},expression:"editTable.customQuery"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveTable}},[e._v("确定")]),a("v-btn",{on:{click:function(t){e.tableEditor=!1}}},[e._v("CLOSE")])],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{on:{click:e.newTable}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-plus ")]),e._v(" 添加表格")],1),a("v-btn",{staticClass:"ml-2",on:{click:e.resetTable}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-refresh ")]),e._v(" 重置")],1)],1)],1),a("v-row",[a("v-col",[a("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("表格名字")]),a("th",{staticClass:"text-left"},[e._v("表格类型")]),a("th",{staticClass:"text-left"},[e._v("战斗")]),a("th",{staticClass:"text-left"},[e._v("表格列")]),a("th",{staticClass:"text-left"},[e._v("法术ID")]),a("th",{staticClass:"text-left"},[e._v("自定义参数")]),a("th",{staticClass:"text-left",staticStyle:{width:"170px"}},[e._v("操作")])])]),a("tbody",e._l(e.tables,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"text-left"},[e._v(" "+e._s(t.displayName)+" ")]),a("td",{staticClass:"text-left"},[e._v(" "+e._s(t.tableName)+" ")]),a("td",{staticClass:"text-left"},[e._v(" "+e._s(t.fights)+" ")]),a("td",{staticClass:"text-left"},[e._v(" "+e._s(e.COLUMN_TEXT[t.column])+" ")]),a("td",{staticClass:"text-left"},[e._v(" "+e._s(void 0!==t.abilityIds?t.abilityIds.join(", "):"")+" ")]),a("td",{staticClass:"text-left"},[e._v(" "+e._s(t.customQuery)+" ")]),a("td",[a("v-btn",{on:{click:function(a){return e.edit(t)}}},[e._v("修改")]),t.predefined?e._e():a("v-btn",{staticClass:"ml-2",attrs:{color:"accent"},on:{click:function(a){return e.deleteTable(t.id)}}},[e._v("删除")])],1)])})),0)]},proxy:!0}])})],1)],1)],1)},D=[],W=(a("ac1f"),a("1276"),a("ba0d")),X=a("71d9"),H=a("b0af"),Y=a("99d9"),Q=a("1f4f"),$=a("b974"),J=a("169a"),K=a("fe57"),q=a("9a96"),z=a("71a3"),Z=a("ec26"),ee={name:"TableSetting",comments:{VSlider:W["a"],VIcon:g["a"],VContainer:f["a"],VToolbar:X["a"],VToolbarTitle:b["a"],VCard:H["a"],VCardTitle:Y["c"],VCardActions:Y["a"],VCardText:Y["b"],VSimpleTable:Q["a"],VSelect:$["a"],VDialog:J["a"],VTabs:K["a"],VTabsSlider:q["a"],VTab:z["a"],VSpacer:p["a"]},data:function(){return{tableEditor:!1,tableTypeSelect:Object.values(_).map((function(e){return{text:e,value:e}})),fightSelect:Object.values(S).map((function(e){return{text:e,value:e}})),COLUMN_TEXT:N,columnSelect:Object.values(R).map((function(e){return{text:N[e],value:e}})),editTable:{predefined:!1,displayName:"",tableName:_.DAMAGE_TAKEN,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:""},editTableMode:"edit"}},computed:Object(c["a"])({},Object(y["c"])("config",["tables"])),methods:Object(c["a"])(Object(c["a"])({},Object(y["b"])("config",["insertTable","updateTable","deleteTable","resetTable"])),{},{edit:function(e){this.editTable=Object.assign({},e,{abilityIds:void 0!==e.abilityIds?e.abilityIds.join(","):""}),this.editTableMode="edit",this.tableEditor=!0},newTable:function(){this.editTable={id:Object(Z["a"])(),predefined:!1,displayName:"",tableName:_.DAMAGE_TAKEN,fights:S.OVERALL,column:R.TOTAL,abilityIds:"",customQuery:""},this.editTableMode="new",this.tableEditor=!0},saveTable:function(){"new"===this.editTableMode?this.insertTable(Object(c["a"])(Object(c["a"])({},this.editTable),{},{abilityIds:this.editTable.abilityIds.split(",")})):"edit"===this.editTableMode&&this.updateTable(Object(c["a"])(Object(c["a"])({},this.editTable),{},{abilityIds:this.editTable.abilityIds.split(",")})),this.tableEditor=!1}})},te=ee,ae=a("2877"),ie=a("6544"),re=a.n(ie),se=a("62ad"),le=a("0fd9"),ne=Object(ae["a"])(te,P,D,!1,null,null,null),oe=ne.exports;re()(ne,{VBtn:O["a"],VCard:H["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:Y["c"],VCol:se["a"],VContainer:f["a"],VDialog:J["a"],VIcon:g["a"],VRow:le["a"],VSelect:$["a"],VSimpleTable:Q["a"],VSpacer:p["a"],VTextField:h["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:e.formulaEditor,callback:function(t){e.formulaEditor=t},expression:"formulaEditor"}},[a("v-card",[a("v-card-title",[e._v("考核分组")]),a("v-card-text",[a("v-text-field",{attrs:{label:"计分组名称"},model:{value:e.editFormula.displayName,callback:function(t){e.$set(e.editFormula,"displayName",t)},expression:"editFormula.displayName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveFormula}},[e._v("确定")]),a("v-btn",{on:{click:function(t){e.formulaEditor=!1}}},[e._v("CLOSE")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:e.subgroupEditor,callback:function(t){e.subgroupEditor=t},expression:"subgroupEditor"}},[a("v-card",[a("v-card-title",[e._v("考核点")]),a("v-card-text",[a("div",{staticClass:"d-flex align-center"},[a("span",[e._v("表格相加")]),a("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:e.addTable}},[a("v-icon",[e._v(" mdi-plus ")])],1)],1),a("div",{staticClass:"d-flex mb-5"},[a("div",{staticStyle:{width:"20px"}},[a("v-divider",{attrs:{vertical:""}})],1),a("div",{staticStyle:{flex:"1"}},e._l(e.editSubgroup.tableIds,(function(t,i){return a("v-row",{key:t.id},[a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{dense:"",label:"倍数",rules:[function(){return!isNaN(parseInt(t.amplifier))||"必须为整数"}]},model:{value:t.amplifier,callback:function(a){e.$set(t,"amplifier",a)},expression:"t.amplifier"}})],1),a("v-col",{attrs:{cols:"7"}},[a("v-select",{attrs:{dense:"",items:e.tableSelect},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"t.id"}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{color:"accent",small:""},on:{click:function(t){return e.deleteTable(i)}}},[a("v-icon",[e._v(" mdi-delete ")])],1)],1)],1)})),1)]),a("v-select",{attrs:{label:"算分方式",items:e.typeSelect},model:{value:e.editSubgroup.type,callback:function(t){e.$set(e.editSubgroup,"type",t)},expression:"editSubgroup.type"}}),e.editSubgroup.type===e.FORMULA_TYPE.RELATIVE_TO_MAX?a("v-text-field",{attrs:{label:"预设最大值",rules:[function(){return!isNaN(parseInt(e.editSubgroup.max))||"必须为整数"}]},model:{value:e.editSubgroup.max,callback:function(t){e.$set(e.editSubgroup,"max",t)},expression:"editSubgroup.max"}}):e._e(),e.editSubgroup.type===e.FORMULA_TYPE.RELATIVE_TO_MIN?a("v-text-field",{attrs:{label:"预设最小值",rules:[function(){return!isNaN(parseInt(e.editSubgroup.min))||"必须为整数"}]},model:{value:e.editSubgroup.min,callback:function(t){e.$set(e.editSubgroup,"min",t)},expression:"editSubgroup.min"}}):e._e(),a("v-switch",{attrs:{label:"反向计分"},model:{value:e.editSubgroup.reverse,callback:function(t){e.$set(e.editSubgroup,"reverse",t)},expression:"editSubgroup.reverse"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveSubgroup}},[e._v("确定")]),a("v-btn",{on:{click:function(t){e.subgroupEditor=!1}}},[e._v("CLOSE")])],1)],1)],1),a("v-row",[a("v-col",{staticClass:"col-11"},[a("v-tabs",{model:{value:e.selectedClassIndex,callback:function(t){e.selectedClassIndex=t},expression:"selectedClassIndex"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),e._l(e.classes,(function(t){return a("v-tab",{key:t.code},[a("span",{style:{color:t.color}},[e._v(" "+e._s(t.display)+" ")])])}))],2)],1),a("v-col",{staticClass:"col-1 d-flex align-center justify-end"},[a("v-btn",{attrs:{small:""},on:{click:e.downloadFormulas}},[a("v-icon",[e._v("mdi-download")]),e._v(" XLSX ")],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{on:{click:e.newFormula}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-plus ")]),e._v("添加组")],1),a("v-btn",{staticClass:"ml-2",on:{click:e.resetFormula}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-refresh ")]),e._v("重置")],1)],1)],1),a("v-row",[a("v-col",e._l(e.formulas,(function(t,i){return a("v-card",{key:i,staticClass:"mb-2",attrs:{elevation:"3"}},[a("v-card-title",{staticClass:"text--primary"},[a("v-row",[a("v-col",{staticClass:"col-1 d-flex align-center"},[t.edit?[a("v-text-field",{attrs:{"hide-details":"",dense:""},model:{value:t.displayName,callback:function(a){e.$set(t,"displayName",a)},expression:"group.displayName"}}),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.edit=!1}}},[a("v-icon",[e._v("mdi-check")])],1)]:[e._v(" "+e._s(t.displayName)+" "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.edit=!0}}},[a("v-icon",[e._v(" mdi-pencil ")])],1)]],2),a("v-col",{staticClass:"col-2 py-0 align-center d-flex"},[a("v-slider",{attrs:{dense:"","hide-details":"",min:"-1",max:"1",step:"0.05",color:"primary"},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"group.weight"}})],1),a("v-col",[e._v(" 比重: "+e._s(t.weight)+" ")]),a("v-col",{staticClass:"d-flex justify-end"},[a("v-btn",{attrs:{fab:"",small:"",color:"accent"},on:{click:function(t){return e.deleteFormula({classType:e.selectedClass,formulaIdx:i})}}},[a("v-icon",[e._v("mdi-delete")])],1)],1)],1)],1),a("v-card-text",[a("v-row",[a("v-col",[a("v-btn",{on:{click:function(t){return e.newSubgroup(i)}}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-plus ")]),e._v("添加计分")],1)],1)],1),a("v-row",[a("v-col",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticStyle:{width:"400px"}},[e._v("表格")]),a("th",{staticStyle:{width:"150px"}},[e._v("算分方式")]),a("th",{staticStyle:{width:"100px"}},[e._v("预设值")]),a("th",{staticStyle:{width:"100px"}},[e._v("反向计分")]),a("th",[e._v("比重")]),a("th",{staticStyle:{width:"170px"}},[e._v("操作")])])]),a("tbody",e._l(t.subGroups,(function(t,r){return a("tr",{key:i+"_"+r},[a("td",[e._v(" "+e._s(t.tableIds.map((function(t){return(void 0!==t.amplifier?"("+t.amplifier+") x":"")+e.tables.find((function(e){return e.id===t.id})).displayName})).join(" + "))+" ")]),a("td",[e._v(e._s(e.FORMULA_TYPE_TEXT[t.type]))]),a("td",[e._v(e._s(t.max))]),a("td",[e._v(e._s(t.reverse))]),a("td",[a("v-row",[a("v-col",{staticClass:"col-1 d-flex align-center"},[e._v(e._s(t.weight))]),a("v-col",[a("v-slider",{attrs:{dense:"","hide-details":"",min:"-1",max:"1",step:"0.01",color:"primary"},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"sub.weight"}})],1)],1)],1),a("td",[a("v-btn",{on:{click:function(t){return e.openEditSubgroup(i,r)}}},[e._v("修改")]),a("v-btn",{staticClass:"ml-2",attrs:{color:"accent"},on:{click:function(t){return e.deleteSubgroup({classType:e.selectedClass,formulaIdx:i,subgroupIdx:r})}}},[e._v("删除")])],1)])})),0)]},proxy:!0}],null,!0)})],1)],1)],1)],1)})),1)],1)],1)},ce=[],ue=(a("a434"),a("ce7e")),pe=a("b73d"),me=[{code:"Warrior",display:"战士",color:"#c69b6d"},{code:"Tank",display:"防御战士",color:"#c69b6d"},{code:"Shaman",display:"萨满祭司",color:"#2359ff"},{code:"Mage",display:"法师",color:"#68ccef"},{code:"Warlock",display:"术士",color:"#9382c9"},{code:"Priest",display:"牧师",color:"#fff"},{code:"Druid",display:"德鲁伊",color:"#ff7c0a"},{code:"Hunter",display:"猎人",color:"#aad372"},{code:"Paladin",display:"圣骑士",color:"#f48cba"},{code:"Rogue",display:"潜行者",color:"#fff468"}],be=a("1146"),fe=a.n(be),Te={name:"FormulaSetting",comments:{VDivider:ue["a"],VSwitch:pe["a"],VSlider:W["a"],VIcon:g["a"],VContainer:f["a"],VToolbar:X["a"],VToolbarTitle:b["a"],VCard:H["a"],VCardTitle:Y["c"],VCardActions:Y["a"],VCardText:Y["b"],VSimpleTable:Q["a"],VSelect:$["a"],VDialog:J["a"],VTabs:K["a"],VTabsSlider:q["a"],VTab:z["a"],VSpacer:p["a"]},data:function(){return{classes:me,FORMULA_TYPE:G,selectedClassIndex:4,formulaEditor:!1,subgroupEditor:!1,typeSelect:Object.values(G).map((function(e){return{text:k[e],value:e}})),FORMULA_TYPE_TEXT:k,editFormula:{displayName:"",edit:!1,weight:1,subGroups:[]},editSubgroupIdx:{formulaIdx:-1,subgroupIdx:-1},editSubgroup:{tableIds:[{id:"DAMAGE",amplifier:1}],weight:1,type:G.RELATIVE_TO_TOP},editFormulaMode:"edit",editSubgroupMode:"edit"}},computed:Object(c["a"])(Object(c["a"])({},Object(y["c"])("config",["tables","allFormulas"])),{},{tableSelect:function(){return this.tables.map((function(e){return{text:e.displayName,value:e.id}}))},selectedClass:function(){return this.classes[this.selectedClassIndex].code},formulas:function(){var e=this,t=this.allFormulas.find((function(t){return t.classType===e.selectedClass}));return t["formulas"]}}),methods:Object(c["a"])(Object(c["a"])({},Object(y["b"])("config",["insertFormula","deleteFormula","resetFormula","insertSubgroup","updateSubgroup","deleteSubgroup"])),{},{openEditSubgroup:function(e,t){this.editSubgroup=Object.assign({},this.formulas[e].subGroups[t]),this.editSubgroupIdx={formulaIdx:e,subgroupIdx:t},this.editSubgroupMode="edit",this.subgroupEditor=!0},newFormula:function(){this.editFormula={displayName:"",edit:!1,weight:1,subGroups:[]},this.editFormulaMode="new",this.formulaEditor=!0},newSubgroup:function(e){this.editSubgroup={tableIds:[{id:"DAMAGE",amplifier:1}],weight:1,type:G.RELATIVE_TO_TOP},this.editSubgroupIdx.formulaIdx=e,this.editSubgroupMode="new",this.subgroupEditor=!0},addTable:function(){this.editSubgroup.tableIds.push({id:"DAMAGE",amplifier:1})},deleteTable:function(e){this.editSubgroup.tableIds.splice(e,1)},saveFormula:function(){this.insertFormula({classType:this.selectedClass,formula:this.editFormula}),this.formulaEditor=!1},saveSubgroup:function(){"new"===this.editSubgroupMode?this.insertSubgroup(Object(c["a"])(Object(c["a"])({classType:this.selectedClass},this.editSubgroupIdx),{},{newSubgroup:Object(c["a"])(Object(c["a"])({},this.editSubgroup),{},{max:parseInt(this.editSubgroup.max)})})):"edit"===this.editSubgroupMode&&this.updateSubgroup(Object(c["a"])(Object(c["a"])({classType:this.selectedClass},this.editSubgroupIdx),{},{subgroup:Object(c["a"])(Object(c["a"])({},this.editSubgroup),{},{max:parseInt(this.editSubgroup.max)})})),this.subgroupEditor=!1},downloadFormulas:function(){for(var e=this,t="哥老瑞考核公式.xlsx",a=this.allFormulas.map((function(t){var a,i=me.find((function(e){return e.code===t.classType})),r=t.formulas.map((function(t){var a=["".concat(100*t.weight,"%"),t.displayName],i=t.subGroups.map((function(t){var a=t.tableIds.map((function(t){return"".concat(void 0!==t.amplifier?"("+t.amplifier+")  x":"").concat(e.tables.find((function(e){return e.id===t.id})).displayName)})).join(" + ");return["","".concat(100*t.weight,"%"),a]}));return[a].concat(i)}));return console.log(r),{sheetName:i.display,sheet:fe.a.utils.aoa_to_sheet((a=[]).concat.apply(a,Object(o["a"])(r)))}})),i=fe.a.utils.book_new(),r=0;r<a.length;r++)console.log(a[r]),fe.a.utils.book_append_sheet(i,a[r]["sheet"],a[r]["sheetName"]);fe.a.writeFile(i,t)}})},Ee=Te,he=Object(ae["a"])(Ee,de,ce,!1,null,null,null),Oe=he.exports;re()(he,{VBtn:O["a"],VCard:H["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:Y["c"],VCol:se["a"],VContainer:f["a"],VDialog:J["a"],VDivider:ue["a"],VIcon:g["a"],VRow:le["a"],VSelect:$["a"],VSimpleTable:Q["a"],VSlider:W["a"],VSpacer:p["a"],VSwitch:pe["a"],VTab:z["a"],VTabs:K["a"],VTabsSlider:q["a"],VTextField:h["a"]});var ge={name:"Setting",components:{TableSetting:oe,FormulaSetting:Oe,VToolbar:X["a"],VToolbarTitle:b["a"],VCard:H["a"],VTabs:K["a"],VTabsSlider:q["a"],VTab:z["a"]},data:function(){return{tab:0}}},ye=ge,Ie=(a("31ed"),a("c671")),Ae=a("aac8"),ve=Object(ae["a"])(ye,B,j,!1,null,null,null),_e=ve.exports;re()(ve,{VCard:H["a"],VTab:z["a"],VTabItem:Ie["a"],VTabs:K["a"],VTabsItems:Ae["a"],VTabsSlider:q["a"],VToolbar:X["a"],VToolbarTitle:b["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",[a("v-btn",{attrs:{small:""},on:{click:e.download}},[a("v-icon",[e._v("mdi-download")]),e._v(" XLSX ")],1)],1)],1),e.scores.length>0?[a("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.items,"items-per-page":20,"hide-default-footer":""}})]:e._e(),a("v-list",{staticClass:"mt-5",attrs:{width:"100%"}},e._l(e.scores,(function(t){return a("v-list-group",{key:t.id,scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name)+" - "+e._s(Math.round(100*t.totalScore)/100))])],1)]},proxy:!0}],null,!0)},e._l(t.detailScore,(function(i,r){return a("v-list-group",{key:t.id+"-"+r,attrs:{"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(i.displayName)+" - "+e._s(Math.round(100*i.score)/100))])],1)],1)]},proxy:!0}],null,!0)},e._l(i.subGroups,(function(i,r){return a("v-list-item",{key:t.id+"-"+r,on:{click:function(t){return e.$emit("openTable",i.subgroupTable)}}},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(i.tableName)+" - "+e._s(Math.round(100*i.score)/100))])],1)],1)})),1)})),1)})),1)],2)},Re=[],Ne=(a("4160"),a("c975"),a("b0c0"),a("159b"),a("8fea")),Le=a("8860"),Ve=a("56b0"),we=a("da13"),xe=a("5d23"),Ce={name:"ScoreTable",components:{VDataTable:Ne["a"],VList:Le["a"],VListGroup:Ve["a"],VListItem:we["a"],VListItemContent:xe["a"],VListItemTitle:xe["b"]},props:{scores:{type:Array,required:!0},reportId:{type:String,required:!0},classType:{type:String,required:!0}},computed:{headers:function(){if(this.scores.length>0){var e=[{text:"名字",align:"start",sortable:!1,value:"name"},{text:"总分",value:"totalScore"}];return e.concat.apply(e,Object(o["a"])(this.scores[0].detailScore.map((function(e){var t,a={text:e.displayName,value:"group-".concat(e.displayName),weight:e.weight},i=e.subGroups.map((function(e){return{text:e.tableName,value:"sub-".concat(e.tableName),weight:e.weight}}));return(t=[a]).concat.apply(t,Object(o["a"])(i))}))))}return[]},items:function(){return this.scores.map((function(e){var t={name:e.name,totalScore:Math.round(100*e.totalScore)/100};return e.detailScore.reduce((function(e,t){return e["group-".concat(t.displayName)]=Math.round(100*t.score)/100,t.subGroups.reduce((function(e,t){return e["sub-".concat(t.tableName)]=Math.round(100*t.score)/100,e}),e),e}),t),t}))}},methods:{download:function(){for(var e=this,t="".concat(this.reportId,".xlsx"),a=this.headers.map((function(e){return e.text})),i=this.items.map((function(t){return e.headers.map((function(e){return t[e.value]}))})),r=[a].concat(i),s=fe.a.utils.book_new(),l=fe.a.utils.aoa_to_sheet(r),n=[],o=null,d=2;d<this.headers.length;d++){var c=this.headers[d];0===c.value.indexOf("group")?(o={idx:d,weight:c.weight,subLayers:[]},n.push(o)):0===c.value.indexOf("sub")&&o.subLayers.push({idx:d,weight:c.weight})}var u=n.map((function(e){return"".concat(String.fromCharCode(65+e.idx),"{playerIdx}*").concat(e.weight)})).join("+"),p="ROUND(".concat(u,",3)"),m=n.map((function(e){var t=e.subLayers.map((function(e){return"".concat(String.fromCharCode(65+e.idx),"{playerIdx}*").concat(e.weight)})).join("+");return{idx:e.idx,formula:"ROUND(".concat(t,",3)")}}));this.items.map((function(e,t){var a="B".concat(t+2);l[a]={f:p.replaceAll("{playerIdx}",t+2)},m.forEach((function(e){var a="".concat(String.fromCharCode(65+e.idx)).concat(t+2);l[a]={f:e.formula.replaceAll("{playerIdx}",t+2)}}))})),fe.a.utils.book_append_sheet(s,l,this.classType),fe.a.writeFile(s,t)}}},Fe=Ce,Me=Object(ae["a"])(Fe,Se,Re,!1,null,null,null),Ge=Me.exports;re()(Me,{VBtn:O["a"],VCol:se["a"],VDataTable:Ne["a"],VIcon:g["a"],VList:Le["a"],VListGroup:Ve["a"],VListItem:we["a"],VListItemContent:xe["a"],VListItemTitle:xe["b"],VRow:le["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"settings",attrs:{elevation:"4",width:"100%",height:"100%"}},[a("v-toolbar",[a("v-toolbar-title",[e._v(" "+e._s(e.table.tableName)+" ")])],1),a("v-container",{attrs:{fluid:""}},[a("v-simple-table",{attrs:{"fixed-header":"",height:"500px"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("名字")]),a("th",{staticClass:"text-left"},[e._v("百分条")]),a("th",{staticClass:"text-left"},[e._v("数值")])])]),a("tbody",e._l(e.table.entries,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.name))]),a("td",{staticStyle:{width:"600px"}},[a("div",{staticClass:"primary",staticStyle:{height:"25px"},style:{width:t.total/e.table.TOP*580+"px"}})]),a("td",[e._v(e._s(t.total))])])})),0)]},proxy:!0}])})],1)],1)},Ue=[],Be={name:"WclTable",components:{VContainer:f["a"],VToolbar:X["a"],VToolbarTitle:b["a"],VSimpleTable:Q["a"],VCard:H["a"]},props:{table:{type:Object,required:!0}},methods:{}},je=Be,Pe=Object(ae["a"])(je,ke,Ue,!1,null,null,null),De=Pe.exports;re()(Pe,{VCard:H["a"],VContainer:f["a"],VSimpleTable:Q["a"],VToolbar:X["a"],VToolbarTitle:b["a"]});var We=[{id:"DAMAGE",predefined:!0,displayName:"全程伤害",tableName:_.DAMAGE,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:""},{id:"TEAMMATE-DAMAGE",predefined:!0,displayName:"队友误伤",tableName:_.DAMAGE_TAKEN,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:"hostility=1&sourceclass=Player&target=Player&by=target"},{id:"27-BUGS-WARRIOR",predefined:!0,displayName:"27虫群嘲无敌",tableName:_.CASTS,fights:S.BEFORE_THREE,column:R.TOTAL,abilityIds:[1161,3169],customQuery:""},{id:"27-BUGS-MAGE",predefined:!0,displayName:"27虫法师无敌",tableName:_.CASTS,fights:S.BEFORE_THREE,column:R.TOTAL,abilityIds:[3169],customQuery:""},{id:"DETECT-MAGIC",predefined:!0,displayName:"门口魔法侦测",tableName:_.CASTS,fights:S.BEFORE_ONE,column:R.TOTAL,abilityIds:[2855],customQuery:""},{id:"27-BUGS-NAIL",predefined:!0,displayName:"通道钉子",tableName:_.DAMAGE,fights:S.BEFORE_THREE,column:R.TOTAL,abilityIds:[17669]},{id:"BEE-ROOM-NAIL",predefined:!0,displayName:"蜜蜂房钉子",tableName:_.DAMAGE,fights:S.BEFORE_SIX,column:R.TOTAL,abilityIds:[17669]},{id:"BOOM-BOX",predefined:!0,displayName:"地精炸弹箱",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[23134]},{id:"AOE-TOTEM",predefined:!0,displayName:"萨满AOE图腾",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[11315,10587]},{id:"EARTH-TOTEM",predefined:!0,displayName:"萨满大地战栗图腾",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[25361,8143]},{id:"WIND-TOTEM",predefined:!0,displayName:"萨满风怒图腾",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[10614,25359]},{id:"BOSS-ONE-TOTEM",predefined:!0,displayName:"老1根基图腾",tableName:_.CASTS,fights:S.ONE,column:R.TOTAL,abilityIds:[8177]},{id:"BEFORE-TWO-TOTEM",predefined:!0,displayName:"三宝前根基图腾",tableName:_.CASTS,fights:S.BEFORE_TWO,column:R.TOTAL,abilityIds:[8177]},{id:"VIS-FROST-SHOCK",predefined:!0,displayName:"小软冰霜震击",tableName:_.CASTS,fights:S.FIVE,column:R.TOTAL,abilityIds:[8056]},{id:"TRAP-ROOM-ACCELERATE",predefined:!0,displayName:"陷阱房加速",tableName:_.CASTS,fights:S.BEFORE_FOUR,column:R.TOTAL,abilityIds:[9175,14530],customQuery:""},{id:"BEE-ROOM-POTION",predefined:!0,displayName:"蜜蜂房自由",tableName:_.BUFFS,fights:S.BEFORE_SIX,column:R.BUFF_TOTAL,abilityIds:[6615],customQuery:""},{id:"MANA-POISON",predefined:!0,displayName:"全程大蓝符文",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[16666,17531,27869],customQuery:""},{id:"DAMAGE-TAKEN",predefined:!0,displayName:"全程承伤",tableName:_.DAMAGE_TAKEN,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:""},{id:"HEALING",predefined:!0,displayName:"全程治疗",tableName:_.HEALING,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:""},{id:"CTHUN-HEALING",predefined:!0,displayName:"克苏恩治疗",tableName:_.HEALING,fights:S.NINE,column:R.TOTAL,abilityIds:[],customQuery:""},{id:"WORLD-BUFFS-MELEE",predefined:!0,displayName:"世界BUFFS",tableName:_.BUFFS,fights:S.OVERALL,column:R.BUFF_TOTAL,abilityIds:[15366,22888,22818,24425,22817,16609],customQuery:""},{id:"WORLD-BUFFS-RANGE",predefined:!0,displayName:"世界BUFFS",tableName:_.BUFFS,fights:S.OVERALL,column:R.BUFF_TOTAL,abilityIds:[15366,22888,22818,24425,22820,16609],customQuery:""},{id:"TRUE-SHOT-AURA",predefined:!0,displayName:"强击光环",tableName:_.BUFFS,fights:S.OVERALL,column:R.BUFF_TOTAL,abilityIds:[20906]},{id:"DUMMY-TARGET",predefined:!0,displayName:"高级活动假人",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[19805],customQuery:""},{id:"SUNDERS",predefined:!0,displayName:"破甲",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[11597],customQuery:""},{id:"VIS",predefined:!0,displayName:"维希度斯冰箭",tableName:_.DAMAGE,fights:S.FIVE,column:R.HIT,abilityIds:[13439,205],customQuery:""},{id:"petrification",predefined:!0,displayName:"化石",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[17624],customQuery:""},{id:"poison",predefined:!0,displayName:"抗毒药剂",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[26677],customQuery:""},{id:"death-wish-1",predefined:!0,displayName:"老1前死愿+鲁莽",tableName:_.CASTS,fights:S.BEFORE_ONE,column:R.TOTAL,abilityIds:[12328,-1719],customQuery:""},{id:"death-wish-2",predefined:!0,displayName:"三宝前死愿",tableName:_.CASTS,fights:S.BEFORE_TWO,column:R.TOTAL,abilityIds:[12328],customQuery:""},{id:"death-wish-3",predefined:!0,displayName:"沙尔图拉死愿",tableName:_.CASTS,fights:S.THREE,column:R.TOTAL,abilityIds:[12328],customQuery:""},{id:"death-wish-4",predefined:!0,displayName:"哈霍兰死愿",tableName:_.CASTS,fights:S.SIX,column:R.TOTAL,abilityIds:[12328],customQuery:""},{id:"death-wish-5",predefined:!0,displayName:"奥罗死愿鲁莽",tableName:_.CASTS,fights:S.EIGHT,column:R.TOTAL,abilityIds:[12328,-1719],customQuery:""},{id:"holy-nova",predefined:!0,displayName:"全程神圣新星",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[27801],customQuery:""},{id:"vis-shoot",predefined:!0,displayName:"维希度斯魔杖",tableName:_.CASTS,fights:S.FIVE,column:R.TOTAL,abilityIds:[5019],customQuery:""},{id:"DAMAGE-MIND-SLAYER",predefined:!0,displayName:"战灵者伤害",tableName:_.DAMAGE,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:"target=209"},{id:"DAMAGE-CHAMPION",predefined:!0,displayName:"勇士伤害",tableName:_.DAMAGE,fights:S.OVERALL,column:R.TOTAL,abilityIds:[],customQuery:"target=213"},{id:"VIS-ICY-BOLT",predefined:!0,displayName:"小软冰箭",tableName:_.CASTS,fights:S.FIVE,column:R.TOTAL,abilityIds:[116]},{id:"FAERIE-FIRE",predefined:!0,displayName:"精灵之火",tableName:_.DEBUFFS,fights:S.OVERALL,abilityIds:[9907],column:R.BUFF_UPTIME,customQuery:"hostility=1"},{id:"WARLOCK-CURSE",predefined:!0,displayName:"术士诅咒",tableName:_.DEBUFFS,fights:S.OVERALL,abilityIds:[11717,11722,11708],column:R.BUFF_UPTIME,customQuery:"hostility=1"},{id:"IMPROVED-EXPOSE-ARMOR",predefined:!0,displayName:"盗贼破甲",tableName:_.CASTS,fights:S.OVERALL,column:R.TOTAL,abilityIds:[11198]}];function Xe(e,t){return Object.values(e).map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{entries:e.entries.filter((function(e){return t.has(e.id)}))})})).reduce((function(e,t){return e[t.tableId]=t,e}),{})}var He={name:"App",components:{ScoreTable:Ge,VAppBar:u["a"],VSpacer:p["a"],VSlideYTransition:m["g"],VToolbarTitle:b["a"],VContainer:f["a"],VMain:T["a"],VFooter:E["a"],VTextField:h["a"],VBtn:O["a"],Setting:_e,WclTable:De,VIcon:g["a"]},data:function(){return{openSetting:!1,openTable:!1,table:{},loading:!1,title:"Classic WCL Analyzer",footer:"Powered by To God be the Glory",reportId:"AKpLva4YtC6ndmFx",selectedClassIndex:0,classes:me,scores:[]}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(y["c"])("config",["tables","allFormulas"])),Object(y["c"])("report",["friendlies","fights","tableEntries","rawReport"])),{},{selectedClass:function(){return this.classes[this.selectedClassIndex].code}}),watch:{openSetting:function(){this.save()}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(y["b"])("report",["setReport","setTableEntries","setFriendlies"])),Object(y["b"])("config",["save"])),{},{openTablePanel:function(e){this.openTable=!0,this.table=e},fetchReport:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,i,r,s,l,n,d,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,L(e.reportId);case 3:return s=t.sent,e.setReport(s),t.next=7,w(e.reportId,_.DAMAGE_TAKEN,e.fights[S.OVERALL].start_time,e.fights[S.OVERALL].end_time,R.TOTAL,{abilityId:"1"});case 7:return l=t.sent,t.next=10,w(e.reportId,_.CASTS,e.fights[S.OVERALL].start_time,e.fights[S.OVERALL].end_time,R.TOTAL,{abilityId:"11717"});case 10:return n=t.sent,t.next=13,w(e.reportId,_.CASTS,e.fights[S.OVERALL].start_time,e.fights[S.OVERALL].end_time,R.TOTAL,{abilityId:"11708"});case 13:return d=t.sent,t.next=16,w(e.reportId,_.CASTS,e.fights[S.OVERALL].start_time,e.fights[S.OVERALL].end_time,R.TOTAL,{abilityId:"11722"});case 16:return c=t.sent,e.setFriendlies({protectionWarriors:l,recklessCurse:n,elementalCurse:c,weaknessCurse:d}),u=new Set((a=[]).concat.apply(a,Object(o["a"])((i=[]).concat.apply(i,Object(o["a"])((r=[]).concat.apply(r,Object(o["a"])(e.allFormulas.map((function(e){return e.formulas})))).map((function(e){return e.subGroups})))).map((function(e){return e.tableIds.map((function(e){return e.id}))}))))),t.next=21,e.fetchTables(Array.from(u));case 21:return t.next=23,e.calcScores();case 23:e.loading=!1;case 24:case"end":return t.stop()}}),t)})))()},fetchTables:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(e.map(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(a){var i,r,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.tables.find((function(e){return e.id===a})),r=t.fights[i.fights],!(i.abilityIds.length>0)){e.next=9;break}return e.next=5,Promise.all(i.abilityIds.map((function(e){return w(t.reportId,i.tableName,r["start_time"],r["end_time"],i.column,{abilityId:e,customQuery:i.customQuery})})));case 5:return s=e.sent,e.abrupt("return",{tableId:a,tableName:i.displayName,entries:"WORLD-BUFFS-MELEE"===a||"WORLD-BUFFS-RANGE"===a?F(s):i.tableName===_.DEBUFFS?M(i.abilityIds,s,t.rawReport["fights"]):C(s)});case 9:return e.next=11,w(t.reportId,i.tableName,r["start_time"],r["end_time"],i.column,{customQuery:i.customQuery});case 11:return l=e.sent,e.abrupt("return",{tableId:a,tableName:i.displayName,entries:l});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:i=a.sent,t.setTableEntries(i);case 4:case"end":return a.stop()}}),a)})))()},calcScores:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.scores=e.allFormulas.map((function(t){var a=t.classType,i=t.formulas,r=U(i),s=e.friendlies.filter((function(e){return e.type===a})),l=Xe(e.tableEntries,new Set(s.map((function(e){return e.id})))),n=r.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{subGroups:t.subGroups.map((function(t){for(var a={},i=function(i){var r=t.tableIds[i],s=void 0===t.specialFormula?l[r.id].entries:e.tableEntries[r.id].entries;s.reduce((function(e,t){return void 0===e[t.id]?(e[t.id]=t,e[t.id]["total"]=t["total"]*r["amplifier"]):e[t.id]["total"]=e[t.id]["total"]+t["total"]*r["amplifier"],e}),a)},r=0;r<t.tableIds.length;r++)i(r);var s=Object.values(a).sort((function(e,t){return t.total-e.total})),n=t.tableIds.map((function(t){return"".concat(void 0!==t.amplifier?"("+t.amplifier+")  x":"").concat(e.tables.find((function(e){return e.id===t.id})).displayName)})).join(" + "),o=s.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0),d=o/s.entries.length,u=s.map((function(e){return e.total})).reduce((function(e,t){return t>e?t:e}),0);return Object(c["a"])(Object(c["a"])({},t),{},{subgroupTable:{entries:s,tableName:n,TOTAL:o,AVG:d,TOP:u}})}))})})),o=s.map((function(e){var t=n.map((function(t){var a=t.subGroups.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{tableName:t.subgroupTable.tableName,score:function(){if(void 0!==t.specialFormula){var a=t.subgroupTable,i=[];e.isRecklessCurseWarlock&&i.push(11717),e.isElementalCurseWarlock&&i.push(11722),e.isWeaknessCurseWarlock&&i.push(11708),e.isFaerieFire&&i.push(9907);var r=new Set(i),s=a.entries.filter((function(e){return r.has(e.id)})).map((function(e){return e.total})).reduce((function(e,t){return e+t}),0),l=s;return l}var n=t.subgroupTable,o=n.entries.find((function(t){return t.id===e.id})),d=void 0===o?0:o.total,c=0;if(t.checkShamanInRangeTeam&&d<t.inRangeTeamThreshold)c=.5;else switch(t.type){case G.RELATIVE_TO_MAX:c=Math.min(d,t.max)/t.max;break;case G.RELATIVE_TO_MIN:c=d>=t.min?1:0;break;case G.RELATIVE_TO_TOP:c=d/n.TOP;break;case G.RELATIVE_TO_AVG:c=d/n.AVG;break;case G.RELATIVE_TO_TOTAL:c=d/n.TOTAL;break;case G.UNITARY:c=d>0?1:0;break}return t.reverse?1-c:c}()})}));return Object(c["a"])(Object(c["a"])({},t),{},{score:a.reduce((function(e,t){return e+t.weight*t.score}),0),subGroups:a})}));return Object(c["a"])(Object(c["a"])({},e),{},{totalScore:t.reduce((function(e,t){return e+t.weight*t.score}),0),detailScore:t})}));return o.sort((function(e,t){return t.totalScore-e.totalScore})),{classType:a,scores:o}}));case 1:case"end":return t.stop()}}),t)})))()}})},Ye=He,Qe=a("7496"),$e=Object(ae["a"])(Ye,l,n,!1,null,null,null),Je=$e.exports;re()($e,{VApp:Qe["a"],VAppBar:u["a"],VBtn:O["a"],VCol:se["a"],VContainer:f["a"],VDialog:J["a"],VFooter:E["a"],VIcon:g["a"],VMain:T["a"],VRow:le["a"],VSlideYTransition:m["g"],VSpacer:p["a"],VTab:z["a"],VTabs:K["a"],VTabsSlider:q["a"],VTextField:h["a"],VToolbarTitle:b["a"]});a("c740"),a("fb6a");var Ke={classType:"Warrior",formulas:[{displayName:"熟练度",edit:!1,weight:.7,subGroups:[{tableIds:[{id:"DAMAGE",amplifier:1},{id:"TEAMMATE-DAMAGE",amplifier:-10}],weight:.67,type:G.RELATIVE_TO_TOP},{tableIds:[{id:"TRUE-SHOT-AURA",amplifier:1}],weight:.03,type:G.UNITARY,reverse:!0},{tableIds:[{id:"HEALING",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1},{tableIds:[{id:"SUNDERS",amplifier:1}],weight:.2,type:G.RELATIVE_TO_TOP}]},{displayName:"战术",edit:!1,weight:.2,subGroups:[{tableIds:[{id:"death-wish-1",amplifier:1}],weight:.2,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"death-wish-2",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"death-wish-3",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"death-wish-4",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"death-wish-5",amplifier:1}],weight:.2,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"27-BUGS-WARRIOR",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"27-BUGS-NAIL",amplifier:1}],type:G.UNITARY,weight:.05},{tableIds:[{id:"BEE-ROOM-NAIL",amplifier:1}],type:G.UNITARY,weight:.05},{tableIds:[{id:"BOOM-BOX",amplifier:1}],type:G.UNITARY,weight:.05},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-MELEE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"poison",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},qe={classType:"Shaman",formulas:[{displayName:"熟练度",edit:!1,weight:.7,subGroups:[{tableIds:[{id:"HEALING",amplifier:1},{id:"CTHUN-HEALING",amplifier:-1}],type:G.RELATIVE_TO_TOP,weight:.7},{tableIds:[{id:"WIND-TOTEM",amplifier:1}],type:G.RELATIVE_TO_TOP,checkShamanInRangeTeam:!0,inRangeTeamThreshold:10,weight:.1},{tableIds:[{id:"EARTH-TOTEM",amplifier:1}],type:G.RELATIVE_TO_TOP,checkShamanInRangeTeam:!0,inRangeTeamThreshold:10,weight:.1},{tableIds:[{id:"DAMAGE",amplifier:1}],type:G.RELATIVE_TO_MIN,min:5e4,weight:.1}]},{displayName:"战术",edit:!1,weight:.2,subGroups:[{tableIds:[{id:"AOE-TOTEM",amplifier:1}],type:G.RELATIVE_TO_MIN,weight:.1,min:2},{tableIds:[{id:"27-BUGS-NAIL",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BEE-ROOM-NAIL",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BOOM-BOX",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"VIS-FROST-SHOCK",amplifier:1}],type:G.RELATIVE_TO_MIN,min:5,weight:.1},{tableIds:[{id:"BOSS-ONE-TOTEM",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BEFORE-TWO-TOTEM",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-RANGE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"MANA-POISON",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},ze={classType:"Mage",formulas:[{displayName:"熟练度",edit:!1,weight:.7,subGroups:[{tableIds:[{id:"DAMAGE",amplifier:1},{id:"TEAMMATE-DAMAGE",amplifier:-10}],weight:.7,type:G.RELATIVE_TO_TOP},{tableIds:[{id:"DAMAGE-MIND-SLAYER",amplifier:1}],weight:.1,type:G.RELATIVE_TO_TOP},{tableIds:[{id:"DAMAGE-CHAMPION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_TOP},{tableIds:[{id:"VIS-ICY-BOLT",amplifier:1}],weight:.1,type:G.RELATIVE_TO_TOP}]},{displayName:"战术",edit:!1,weight:.2,subGroups:[{tableIds:[{id:"27-BUGS-MAGE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"DETECT-MAGIC",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MIN,min:2},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-MELEE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"poison",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},Ze={classType:"Warlock",formulas:[{displayName:"熟练度",edit:!1,weight:.8,subGroups:[{tableIds:[{id:"DAMAGE",amplifier:1},{id:"TEAMMATE-DAMAGE",amplifier:-10}],weight:.7,type:G.RELATIVE_TO_TOP},{specialFormula:"WARLOCK-CURSE",tableIds:[{id:"WARLOCK-CURSE",amplifier:1}],type:G.DEBUFF,weight:.2},{tableIds:[{id:"vis-shoot",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]},{displayName:"战术",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-RANGE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"poison",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},et={classType:"Priest",formulas:[{displayName:"熟练度",edit:!1,weight:.8,subGroups:[{tableIds:[{id:"HEALING",amplifier:1},{id:"CTHUN-HEALING",amplifier:-1}],type:G.RELATIVE_TO_TOP,weight:.8},{tableIds:[{id:"DAMAGE",amplifier:1}],type:G.RELATIVE_TO_MIN,min:5e4,weight:.1},{tableIds:[{id:"holy-nova",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.05},{tableIds:[{id:"vis-shoot",amplifier:1}],type:G.RELATIVE_TO_MIN,min:10,weight:.05}]},{displayName:"战术",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"27-BUGS-NAIL",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BEE-ROOM-NAIL",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BOOM-BOX",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-RANGE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"MANA-POISON",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},tt={classType:"Rogue",formulas:[{displayName:"熟练度",edit:!1,weight:.7,subGroups:[{tableIds:[{id:"DAMAGE",amplifier:1},{id:"TEAMMATE-DAMAGE",amplifier:-10},{id:"IMPROVED-EXPOSE-ARMOR",amplifier:15e3}],weight:.9,type:G.RELATIVE_TO_TOP},{tableIds:[{id:"HEALING",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]},{displayName:"战术",edit:!1,weight:.2,subGroups:[{tableIds:[{id:"27-BUGS-NAIL",amplifier:1}],type:G.UNITARY,weight:.05},{tableIds:[{id:"BEE-ROOM-NAIL",amplifier:1}],type:G.UNITARY,weight:.05},{tableIds:[{id:"BOOM-BOX",amplifier:1}],type:G.UNITARY,weight:.05},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-MELEE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"poison",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},at={classType:"Druid",formulas:[{displayName:"熟练度",edit:!1,weight:.8,subGroups:[{tableIds:[{id:"HEALING",amplifier:1},{id:"CTHUN-HEALING",amplifier:-1}],type:G.RELATIVE_TO_TOP,weight:.8},{tableIds:[{id:"DAMAGE",amplifier:1}],type:G.RELATIVE_TO_MIN,min:5e4,weight:.1},{specialFormula:"FAERIE-FIRE",tableIds:[{id:"FAERIE-FIRE",amplifier:1}],type:G.DEBUFF,weight:.1}]},{displayName:"战术",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"27-BUGS-NAIL",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BEE-ROOM-NAIL",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"BOOM-BOX",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:G.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.1,subGroups:[{tableIds:[{id:"WORLD-BUFFS-RANGE",amplifier:1}],type:G.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:G.UNITARY,weight:.1},{tableIds:[{id:"MANA-POISON",amplifier:1}],type:G.RELATIVE_TO_TOP,weight:.1}]}]},it={classType:"Tank",formulas:[]},rt={classType:"Hunter",formulas:[]},st={classType:"Paladin",formulas:[]},lt=[Ke,it,qe,ze,Ze,et,at,rt,st,tt],nt=function(){return{tables:localStorage.getItem("gloryWCLSetting-tables-2020-11-21")?JSON.parse(localStorage.getItem("gloryWCLSetting-tables-2020-11-21")):We.slice(),allFormulas:localStorage.getItem("gloryWCLSetting-formulas-2020-11-21")?JSON.parse(localStorage.getItem("gloryWCLSetting-formulas-2020-11-21")):lt.slice()}},ot={},dt={},ct={save:function(e){localStorage.setItem("gloryWCLSetting-tables-2020-11-21",JSON.stringify(e.tables)),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",JSON.stringify(e.allFormulas))},updateTable:function(e,t){var a=e.tables.findIndex((function(e){return e.id===t.id}));i["default"].set(e.tables,a,t),localStorage.setItem("gloryWCLSetting-tables-2020-11-21",JSON.stringify(e.tables))},insertTable:function(e,t){e.tables.push(t),localStorage.setItem("gloryWCLSetting-tables-2020-11-21",JSON.stringify(e.tables))},deleteTable:function(e,t){var a=e.tables.findIndex((function(e){return e.id===t}));e.tables.splice(a,1),localStorage.setItem("gloryWCLSetting-tables-2020-11-21",JSON.stringify(e.tables))},resetTable:function(e){e.tables=We.slice(),localStorage.setItem("gloryWCLSetting-tables-2020-11-21",JSON.stringify(e.tables))},insertFormula:function(e,t){var a=t.classType,i=t.formula;e.allFormulas.find((function(e){return e.classType===a}))["formulas"].unshift(i),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",JSON.stringify(e.allFormulas))},deleteFormula:function(e,t){var a=t.classType,i=t.formulaIdx;e.allFormulas.find((function(e){return e.classType===a}))["formulas"].splice(i,1),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",JSON.stringify(e.allFormulas))},resetFormula:function(e){e.allFormulas=lt.slice(),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",JSON.stringify(e.allFormulas))},insertSubgroup:function(e,t){var a=t.classType,i=t.formulaIdx,r=t.newSubgroup;e.allFormulas.find((function(e){return e.classType===a}))["formulas"][i].subGroups.unshift(r),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",JSON.stringify(e.allFormulas))},updateSubgroup:function(e,t){var a=t.classType,r=t.formulaIdx,s=t.subgroupIdx,l=t.subgroup;i["default"].set(e.allFormulas.find((function(e){return e.classType===a}))["formulas"][r].subGroups,s,l),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",JSON.stringify(e.allFormulas))},deleteSubgroup:function(e,t){var a=t.classType,i=t.formulaIdx,r=t.subgroupIdx;e.allFormulas.find((function(e){return e.classType===a}))["formulas"][i].subGroups.splice(r,1),localStorage.setItem("gloryWCLSetting-formulas-2020-11-21",e.allFormulas)}},ut={namespaced:!0,state:nt,getters:ot,actions:dt,mutations:ct},pt=function(){return{rawReport:{},fights:{},friendlies:[],enemies:[],tableEntries:{}}},mt={},bt={setFriendlies:function(e,t){var a=t.protectionWarriors,i=t.recklessCurse,r=t.elementalCurse,s=t.weaknessCurse,l=new Set(a.sort((function(e,t){return t["total"]-e["total"]})).splice(0,3).map((function(e){return e["id"]}))),n=i.sort((function(e,t){return t["total"]-e["total"]})).splice(0,1).map((function(e){return e["id"]}))[0],o=r.sort((function(e,t){return t["total"]-e["total"]})).splice(0,1).map((function(e){return e["id"]}))[0],d=s.sort((function(e,t){return t["total"]-e["total"]})).splice(0,1).map((function(e){return e["id"]}))[0];e.friendlies=e.friendlies.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{type:l.has(e["id"])?"Tank":e["type"],isRecklessCurseWarlock:n===e["id"],isElementalCurseWarlock:o===e["id"],isWeaknessCurseWarlock:d===e["id"],isFaerieFire:"Druid"===e["type"]})}))},setReport:function(e,t){e.rawReport=t,e.friendlies=[],e.fights={};for(var a=0;a<t.friendlies.length;a++){var i=t.friendlies[a];e.friendlies[i.id]=i}e.fights[S.OVERALL]={start_time:t.fights[0]["start_time"],end_time:t.fights[t.fights.length-1]["end_time"]};var r=new Set(Object.values(S));t.fights.forEach((function(t){var a=r.has(t.name)?t.name:"".concat(t.name,"-").concat(t.id);e.fights[a]=t})),e.fights[S.BEFORE_ONE]={start_time:e.fights[S.OVERALL].start_time+1,end_time:e.fights[S.ONE].start_time-1},e.fights[S.BEFORE_TWO]={start_time:e.fights[S.ONE].end_time+1,end_time:e.fights[S.TWO].start_time-1},e.fights[S.BEFORE_THREE]={start_time:e.fights[S.TWO].end_time+1,end_time:e.fights[S.THREE].start_time-1},e.fights[S.BEFORE_FOUR]={start_time:e.fights[S.THREE].end_time+1,end_time:e.fights[S.FOUR].start_time-1},e.fights[S.BEFORE_SIX]={start_time:e.fights[S.FIVE].end_time+1,end_time:e.fights[S.SIX].start_time-1},e.fights[S.BEFORE_SEVEN]={start_time:e.fights[S.SIX].end_time+1,end_time:e.fights[S.SEVEN].start_time-1},e.fights[S.BEFORE_EIGHT]={start_time:e.fights[S.SEVEN].end_time+1,end_time:e.fights[S.EIGHT].start_time-1}},setTableEntries:function(e,t){e.tableEntries=Object(c["a"])(Object(c["a"])({},e.tableEntries),t.reduce((function(e,t){return e[t.tableId]=t,e}),{}))}},ft={},Tt={namespaced:!0,state:pt,getters:mt,actions:ft,mutations:bt};i["default"].use(y["a"]);var Et=new y["a"].Store({modules:{config:ut,report:Tt}}),ht=(a("bf40"),a("fcf4"));i["default"].config.productionTip=!1,i["default"].use(s.a),i["default"].use(y["a"]),new i["default"]({store:Et,vuetify:new s.a({theme:{dark:!0,themes:{dark:{primary:ht["a"].yellow.darken3,accent:ht["a"].red.darken3}}}}),render:function(e){return e(Je)}}).$mount("#app")},"8e4e":function(e,t,a){}});
//# sourceMappingURL=app.2775e983.js.map