(function(t){function e(e){for(var i,l,n=e[0],o=e[1],c=e[2],d=0,b=[];d<n.length;d++)l=n[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&b.push(r[l][0]),r[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(b.length)b.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,n=1;n<a.length;n++){var o=a[n];0!==r[o]&&(i=!1)}i&&(s.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},r={app:0},s=[];function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=o;s.push([1,"chunk-vendors"]),a()})({0:function(t,e){},1:function(t,e,a){t.exports=a("56d7")},2:function(t,e){},3:function(t,e){},"31ed":function(t,e,a){"use strict";var i=a("8e4e"),r=a.n(i);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=a("ce5b"),s=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.openSetting=!t.openSetting}}},[a("v-icon",[t._v("mdi-settings-box")])],1)],1),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{"max-width":"1000"},model:{value:t.openTable,callback:function(e){t.openTable=e},expression:"openTable"}},[a("wcl-table",{attrs:{table:t.table}})],1),a("v-slide-y-transition",[a("setting",{directives:[{name:"show",rawName:"v-show",value:t.openSetting,expression:"openSetting"}]})],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.openSetting,expression:"!openSetting"}]},[a("v-col",{staticClass:"col-5 offset-3"},[a("v-text-field",{attrs:{loading:t.loading,disabled:t.loading,label:"wcl report id"},model:{value:t.reportId,callback:function(e){t.reportId=e},expression:"reportId"}})],1),a("v-col",{attrs:{"align-self":"center"}},[a("v-btn",{attrs:{disabled:t.loading},on:{click:t.fetchReport}},[t._v("Fetch")])],1)],1),!t.openSetting&&t.scores.length>0?[a("v-row",[a("v-tabs",{model:{value:t.selectedClassIndex,callback:function(e){t.selectedClassIndex=e},expression:"selectedClassIndex"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),t._l(t.classes,(function(e){return a("v-tab",{key:e.code},[a("span",{style:{color:e.color}},[t._v(" "+t._s(e.display)+" ")])])}))],2)],1),a("v-row",[a("v-col",[a("score-table",{attrs:{scores:t.scores.find((function(e){return e.classType===t.selectedClass})).scores,"report-id":t.reportId,"class-type":t.selectedClass},on:{openTable:t.openTablePanel}})],1)],1)]:t._e()],2)],1),a("v-footer",{attrs:{app:""}},[t._v(" "+t._s(t.footer)+" ")])],1)},n=[],o=(a("99af"),a("4de4"),a("7db0"),a("a630"),a("a15b"),a("d81d"),a("13d5"),a("d3b7"),a("07ac"),a("6062"),a("3ca3"),a("ddb0"),a("2909")),c=(a("96cf"),a("1da1")),u=a("5530"),d=a("40dc"),b=a("2fa4"),p=a("0789"),f=a("2a7f"),m=a("a523"),v=a("f6c4"),T=a("553a"),h=a("8654"),g=a("8336"),y=a("132d"),_=a("2f62"),S="2dd31d65c33dabb5d269c9d24c4a14ed",O="api_key=".concat(S,"&translate=true"),E="https://cn.classic.warcraftlogs.com/v1",I={SUMMARY:"summary",DAMAGE:"damage-done",DAMAGE_TAKEN:"damage-taken",HEALING:"healing",CASTS:"casts",SUMMONS:"summons",BUFFS:"buffs",DEBUFFS:"debuffs",DEATHS:"deaths",SURVIVABILITY:"survivability",RESOURCES:"resources",RESOURCE_GAINS:"resources-gains"},x={OVERALL:"全程",BEFORE_ONE:"四狗+三鸡",ONE:"预言者斯克拉姆",BEFORE_TWO:"三宝前",TWO:"安其拉三宝",BEFORE_THREE:"通道虫",THREE:"沙尔图拉",BEFORE_FOUR:"陷阱房",FOUR:"顽强的范克瑞斯",FIVE:"维希度斯",BEFORE_SIX:"蜜蜂房",SIX:"哈霍兰公主",BEFORE_SEVEN:"五狗",SEVEN:"双子皇帝",BEFORE_EIGHT:"天堂之路",EIGHT:"奥罗",NINE:"克苏恩"},V={TOTAL:"total",HIT:"hitCount",BUFF_TOTAL:"totalUses"},A={total:"总数值",hitCount:"命中数",totalUses:"BUFF数"};function w(t){return N.apply(this,arguments)}function N(){return N=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(E,"/report/fights/").concat(e,"?").concat(O));case 2:return a=t.sent,t.next=5,a.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),N.apply(this,arguments)}function C(t,e,a,i,r,s){return L.apply(this,arguments)}function L(){return L=Object(c["a"])(regeneratorRuntime.mark((function t(e,a,i,r,s,l){var n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=O,l["abilityId"]&&(n="".concat(n,"&abilityid=").concat(l["abilityId"])),l["customQuery"]&&(n="".concat(n,"&").concat(l["customQuery"])),t.next=5,fetch("".concat(E,"/report/tables/").concat(a,"/").concat(e,"?start=").concat(i,"&end=").concat(r,"&").concat(n));case 5:return o=t.sent,t.next=8,o.json();case 8:return c=t.sent,t.abrupt("return",(a===I.BUFFS?c["auras"]:c["entries"]).map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{total:t[s]})})));case 10:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function R(t){var e;return Object.values((e=[]).concat.apply(e,Object(o["a"])(t)).reduce((function(t,e){return void 0===t[e.id]?t[e.id]=e:t[e.id].total+=e.total,t}),{}))}function j(t){var e;return Object.values((e=[]).concat.apply(e,Object(o["a"])(t)).reduce((function(t,e){return void 0===t[e.id]?t[e.id]=Object(u["a"])(Object(u["a"])({},e),{},{total:1}):t[e.id].total+=1,t}),{}))}var F={RELATIVE_TO_TOP:"to_top",RELATIVE_TO_MAX:"to_max",RELATIVE_TO_AVG:"to_avg",RELATIVE_TO_TOTAL:"to_total",UNITARY:"unitary"},k={to_top:"相对于第一名",to_max:"相对于预设值",to_avg:"相对于平均",to_total:"相对于总数",unitary:"转换成0或1"},M={classType:"Warrior",formulas:[{displayName:"熟练度",edit:!1,weight:.5,subGroups:[{tableIds:[{id:"DAMAGE",amplifier:1},{id:"TEAMMATE-DAMAGE",amplifier:-10}],weight:.67,type:F.RELATIVE_TO_TOP},{tableIds:[{id:"TRUE-SHOT-AURA",amplifier:1}],weight:.03,type:F.UNITARY,reverse:!0},{tableIds:[{id:"HEALING",amplifier:1}],type:F.RELATIVE_TO_TOP,weight:.1},{tableIds:[{id:"SUNDERS",amplifier:1}],weight:.2,type:F.RELATIVE_TO_TOP}]},{displayName:"战术",edit:!1,weight:.3,subGroups:[{tableIds:[{id:"death-wish-1",amplifier:1}],weight:.2,type:F.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"death-wish-2",amplifier:1}],weight:.1,type:F.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"death-wish-3",amplifier:1}],weight:.1,type:F.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"death-wish-4",amplifier:1}],weight:.1,type:F.RELATIVE_TO_MAX,max:1},{tableIds:[{id:"death-wish-5",amplifier:1}],weight:.2,type:F.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"27-BUGS",amplifier:1}],weight:.1,type:F.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"TRAP-ROOM-ACCELERATE",amplifier:1}],weight:.1,type:F.RELATIVE_TO_MAX,max:2},{tableIds:[{id:"BEE-ROOM-POTION",amplifier:1}],weight:.1,type:F.RELATIVE_TO_MAX,max:1}]},{displayName:"投入",edit:!1,weight:.2,subGroups:[{tableIds:[{id:"WORLD-BUFFS",amplifier:1}],type:F.RELATIVE_TO_MAX,max:6,weight:.8},{tableIds:[{id:"petrification",amplifier:1}],type:F.UNITARY,weight:.1},{tableIds:[{id:"poison",amplifier:1}],type:F.RELATIVE_TO_TOP,weight:.1}]}]},G={classType:"Tank",formulas:[]},B={classType:"Shaman",formulas:[]},U={classType:"Mage",formulas:[]},D={classType:"Warlock",formulas:[]},P={classType:"Priest",formulas:[]},W={classType:"Druid",formulas:[]},Q={classType:"Hunter",formulas:[]},X={classType:"Paladin",formulas:[]},H={classType:"Rogue",formulas:[]},$=[M,G,B,U,D,P,W,Q,X,H];function J(t){var e=t.reduce((function(t,e){return e.weight>0?t+e.weight:t}),0),a=t.map((function(t){var a=t.subGroups.reduce((function(t,e){return e.weight>0?t+e.weight:t}),0);return Object(u["a"])(Object(u["a"])({},t),{},{weight:t.weight/e,subGroups:t.subGroups.map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{weight:t.weight/a})}))})}));return a}var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"settings",attrs:{elevation:"4",width:"100%"}},[a("v-toolbar",{scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",[t._v("表格")]),a("v-tab",[t._v("考核公式")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(" 设置 ")])],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("table-setting")],1),a("v-tab-item",[a("formula-setting")],1)],1)],1)},K=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:t.tableEditor,callback:function(e){t.tableEditor=e},expression:"tableEditor"}},[a("v-card",[a("v-card-title",[t._v("表格")]),a("v-card-text",[a("v-text-field",{attrs:{label:"表格名称"},model:{value:t.editTable.displayName,callback:function(e){t.$set(t.editTable,"displayName",e)},expression:"editTable.displayName"}}),a("v-select",{attrs:{label:"表格类型",items:t.tableTypeSelect},model:{value:t.editTable.tableName,callback:function(e){t.$set(t.editTable,"tableName",e)},expression:"editTable.tableName"}}),a("v-select",{attrs:{label:"战斗",items:t.fightSelect},model:{value:t.editTable.fights,callback:function(e){t.$set(t.editTable,"fights",e)},expression:"editTable.fights"}}),a("v-select",{attrs:{label:"表格列",items:t.columnSelect},model:{value:t.editTable.column,callback:function(e){t.$set(t.editTable,"column",e)},expression:"editTable.column"}}),a("v-text-field",{attrs:{label:"法术ID",rules:[function(){return 0===t.editTable.abilityIds.length||t.editTable.abilityIds.split(",").every((function(t){return!isNaN(parseInt(t))}))||"必须为以,隔开的数字"}]},model:{value:t.editTable.abilityIds,callback:function(e){t.$set(t.editTable,"abilityIds",e)},expression:"editTable.abilityIds"}}),a("v-text-field",{attrs:{label:"自定义参数"},model:{value:t.editTable.customQuery,callback:function(e){t.$set(t.editTable,"customQuery",e)},expression:"editTable.customQuery"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.saveTable}},[t._v("确定")]),a("v-btn",{on:{click:function(e){t.tableEditor=!1}}},[t._v("CLOSE")])],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{on:{click:t.newTable}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-plus ")]),t._v(" 添加表格")],1),a("v-btn",{staticClass:"ml-2",on:{click:t.resetTable}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-refresh ")]),t._v(" 重置")],1)],1)],1),a("v-row",[a("v-col",[a("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("表格名字")]),a("th",{staticClass:"text-left"},[t._v("表格类型")]),a("th",{staticClass:"text-left"},[t._v("战斗")]),a("th",{staticClass:"text-left"},[t._v("表格列")]),a("th",{staticClass:"text-left"},[t._v("法术ID")]),a("th",{staticClass:"text-left"},[t._v("自定义参数")]),a("th",{staticClass:"text-left",staticStyle:{width:"170px"}},[t._v("操作")])])]),a("tbody",t._l(t.tables,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(" "+t._s(e.displayName)+" ")]),a("td",{staticClass:"text-left"},[t._v(" "+t._s(e.tableName)+" ")]),a("td",{staticClass:"text-left"},[t._v(" "+t._s(e.fights)+" ")]),a("td",{staticClass:"text-left"},[t._v(" "+t._s(t.COLUMN_TEXT[e.column])+" ")]),a("td",{staticClass:"text-left"},[t._v(" "+t._s(void 0!==e.abilityIds?e.abilityIds.join(", "):"")+" ")]),a("td",{staticClass:"text-left"},[t._v(" "+t._s(e.customQuery)+" ")]),a("td",[a("v-btn",{on:{click:function(a){return t.edit(e)}}},[t._v("修改")]),e.predefined?t._e():a("v-btn",{staticClass:"ml-2",attrs:{color:"accent"},on:{click:function(a){return t.deleteTable(e.id)}}},[t._v("删除")])],1)])})),0)]},proxy:!0}])})],1)],1)],1)},z=[],Z=(a("ac1f"),a("1276"),a("ba0d")),tt=a("71d9"),et=a("b0af"),at=a("99d9"),it=a("1f4f"),rt=a("b974"),st=a("169a"),lt=a("fe57"),nt=a("9a96"),ot=a("71a3"),ct=a("ec26"),ut={name:"TableSetting",comments:{VSlider:Z["a"],VIcon:y["a"],VContainer:m["a"],VToolbar:tt["a"],VToolbarTitle:f["a"],VCard:et["a"],VCardTitle:at["c"],VCardActions:at["a"],VCardText:at["b"],VSimpleTable:it["a"],VSelect:rt["a"],VDialog:st["a"],VTabs:lt["a"],VTabsSlider:nt["a"],VTab:ot["a"],VSpacer:b["a"]},data:function(){return{tableEditor:!1,tableTypeSelect:Object.values(I).map((function(t){return{text:t,value:t}})),fightSelect:Object.values(x).map((function(t){return{text:t,value:t}})),COLUMN_TEXT:A,columnSelect:Object.values(V).map((function(t){return{text:A[t],value:t}})),editTable:{predefined:!1,displayName:"",tableName:I.DAMAGE_TAKEN,fights:x.OVERALL,column:V.TOTAL,abilityIds:[],customQuery:""},editTableMode:"edit"}},computed:Object(u["a"])({},Object(_["c"])("config",["tables"])),methods:Object(u["a"])(Object(u["a"])({},Object(_["b"])("config",["insertTable","updateTable","deleteTable","resetTable"])),{},{edit:function(t){this.editTable=Object.assign({},t,{abilityIds:void 0!==t.abilityIds?t.abilityIds.join(","):""}),this.editTableMode="edit",this.tableEditor=!0},newTable:function(){this.editTable={id:Object(ct["a"])(),predefined:!1,displayName:"",tableName:I.DAMAGE_TAKEN,fights:x.OVERALL,column:V.TOTAL,abilityIds:"",customQuery:""},this.editTableMode="new",this.tableEditor=!0},saveTable:function(){"new"===this.editTableMode?this.insertTable(Object(u["a"])(Object(u["a"])({},this.editTable),{},{abilityIds:this.editTable.abilityIds.split(",")})):"edit"===this.editTableMode&&this.updateTable(Object(u["a"])(Object(u["a"])({},this.editTable),{},{abilityIds:this.editTable.abilityIds.split(",")})),this.tableEditor=!1}})},dt=ut,bt=a("2877"),pt=a("6544"),ft=a.n(pt),mt=a("62ad"),vt=a("0fd9"),Tt=Object(bt["a"])(dt,q,z,!1,null,null,null),ht=Tt.exports;ft()(Tt,{VBtn:g["a"],VCard:et["a"],VCardActions:at["a"],VCardText:at["b"],VCardTitle:at["c"],VCol:mt["a"],VContainer:m["a"],VDialog:st["a"],VIcon:y["a"],VRow:vt["a"],VSelect:rt["a"],VSimpleTable:it["a"],VSpacer:b["a"],VTextField:h["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:t.formulaEditor,callback:function(e){t.formulaEditor=e},expression:"formulaEditor"}},[a("v-card",[a("v-card-title",[t._v("考核分组")]),a("v-card-text",[a("v-text-field",{attrs:{label:"计分组名称"},model:{value:t.editFormula.displayName,callback:function(e){t.$set(t.editFormula,"displayName",e)},expression:"editFormula.displayName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.saveFormula}},[t._v("确定")]),a("v-btn",{on:{click:function(e){t.formulaEditor=!1}}},[t._v("CLOSE")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:t.subgroupEditor,callback:function(e){t.subgroupEditor=e},expression:"subgroupEditor"}},[a("v-card",[a("v-card-title",[t._v("考核点")]),a("v-card-text",[a("div",{staticClass:"d-flex align-center"},[a("span",[t._v("表格相加")]),a("v-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:t.addTable}},[a("v-icon",[t._v(" mdi-plus ")])],1)],1),a("div",{staticClass:"d-flex mb-5"},[a("div",{staticStyle:{width:"20px"}},[a("v-divider",{attrs:{vertical:""}})],1),a("div",{staticStyle:{flex:"1"}},t._l(t.editSubgroup.tableIds,(function(e,i){return a("v-row",{key:e.id},[a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{dense:"",label:"倍数",rules:[function(){return!isNaN(parseInt(e.amplifier))||"必须为整数"}]},model:{value:e.amplifier,callback:function(a){t.$set(e,"amplifier",a)},expression:"t.amplifier"}})],1),a("v-col",{attrs:{cols:"7"}},[a("v-select",{attrs:{dense:"",items:t.tableSelect},model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"t.id"}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{color:"accent",small:""},on:{click:function(e){return t.deleteTable(i)}}},[a("v-icon",[t._v(" mdi-delete ")])],1)],1)],1)})),1)]),a("v-select",{attrs:{label:"算分方式",items:t.typeSelect},model:{value:t.editSubgroup.type,callback:function(e){t.$set(t.editSubgroup,"type",e)},expression:"editSubgroup.type"}}),a("v-text-field",{attrs:{label:"预设值",rules:[function(){return!isNaN(parseInt(t.editSubgroup.max))||"必须为整数"}]},model:{value:t.editSubgroup.max,callback:function(e){t.$set(t.editSubgroup,"max",e)},expression:"editSubgroup.max"}}),a("v-switch",{attrs:{label:"反向计分"},model:{value:t.editSubgroup.reverse,callback:function(e){t.$set(t.editSubgroup,"reverse",e)},expression:"editSubgroup.reverse"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.saveSubgroup}},[t._v("确定")]),a("v-btn",{on:{click:function(e){t.subgroupEditor=!1}}},[t._v("CLOSE")])],1)],1)],1),a("v-row",[a("v-tabs",{model:{value:t.selectedClassIndex,callback:function(e){t.selectedClassIndex=e},expression:"selectedClassIndex"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),t._l(t.classes,(function(e){return a("v-tab",{key:e.code},[a("span",{style:{color:e.color}},[t._v(" "+t._s(e.display)+" ")])])}))],2)],1),a("v-row",[a("v-col",[a("v-btn",{on:{click:t.newFormula}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-plus ")]),t._v("添加组")],1),a("v-btn",{staticClass:"ml-2",on:{click:t.resetFormula}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-refresh ")]),t._v("重置")],1)],1)],1),a("v-row",[a("v-col",t._l(t.formulas,(function(e,i){return a("v-card",{key:i,staticClass:"mb-2",attrs:{elevation:"3"}},[a("v-card-title",{staticClass:"text--primary"},[a("v-row",[a("v-col",{staticClass:"col-1 d-flex align-center"},[e.edit?[a("v-text-field",{attrs:{"hide-details":"",dense:""},model:{value:e.displayName,callback:function(a){t.$set(e,"displayName",a)},expression:"group.displayName"}}),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.edit=!1}}},[a("v-icon",[t._v("mdi-check")])],1)]:[t._v(" "+t._s(e.displayName)+" "),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.edit=!0}}},[a("v-icon",[t._v(" mdi-pencil ")])],1)]],2),a("v-col",{staticClass:"col-2 py-0 align-center d-flex"},[a("v-slider",{attrs:{dense:"","hide-details":"",min:"-1",max:"1",step:"0.05",color:"primary"},model:{value:e.weight,callback:function(a){t.$set(e,"weight",a)},expression:"group.weight"}})],1),a("v-col",[t._v(" 比重: "+t._s(e.weight)+" ")]),a("v-col",{staticClass:"d-flex justify-end"},[a("v-btn",{attrs:{fab:"",small:"",color:"accent"},on:{click:function(e){return t.deleteFormula({classType:t.selectedClass,formulaIdx:i})}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1),a("v-card-text",[a("v-row",[a("v-col",[a("v-btn",{on:{click:function(e){return t.newSubgroup(i)}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-plus ")]),t._v("添加计分")],1)],1)],1),a("v-row",[a("v-col",[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticStyle:{width:"400px"}},[t._v("表格")]),a("th",{staticStyle:{width:"150px"}},[t._v("算分方式")]),a("th",{staticStyle:{width:"100px"}},[t._v("预设值")]),a("th",{staticStyle:{width:"100px"}},[t._v("反向计分")]),a("th",[t._v("比重")]),a("th",{staticStyle:{width:"170px"}},[t._v("操作")])])]),a("tbody",t._l(e.subGroups,(function(e,r){return a("tr",{key:i+"_"+r},[a("td",[t._v(" "+t._s(e.tableIds.map((function(e){return(void 0!==e.amplifier?"("+e.amplifier+") x":"")+t.tables.find((function(t){return t.id===e.id})).displayName})).join(" + "))+" ")]),a("td",[t._v(t._s(t.FORMULA_TYPE_TEXT[e.type]))]),a("td",[t._v(t._s(e.max))]),a("td",[t._v(t._s(e.reverse))]),a("td",[a("v-row",[a("v-col",{staticClass:"col-1 d-flex align-center"},[t._v(t._s(e.weight))]),a("v-col",[a("v-slider",{attrs:{dense:"","hide-details":"",min:"-1",max:"1",step:"0.01",color:"primary"},model:{value:e.weight,callback:function(a){t.$set(e,"weight",a)},expression:"sub.weight"}})],1)],1)],1),a("td",[a("v-btn",{on:{click:function(e){return t.openEditSubgroup(i,r)}}},[t._v("修改")]),a("v-btn",{staticClass:"ml-2",attrs:{color:"accent"},on:{click:function(e){return t.deleteSubgroup({classType:t.selectedClass,formulaIdx:i,subgroupIdx:r})}}},[t._v("删除")])],1)])})),0)]},proxy:!0}],null,!0)})],1)],1)],1)],1)})),1)],1)],1)},yt=[],_t=(a("a434"),a("ce7e")),St=a("b73d"),Ot=[{code:"Warrior",display:"战士",color:"#c69b6d"},{code:"Tank",display:"防御战士",color:"#c69b6d"},{code:"Shaman",display:"萨满祭司",color:"#2359ff"},{code:"Mage",display:"法师",color:"#68ccef"},{code:"Warlock",display:"术士",color:"#9382c9"},{code:"Priest",display:"牧师",color:"#fff"},{code:"Druid",display:"德鲁伊",color:"#ff7c0a"},{code:"Hunter",display:"猎人",color:"#aad372"},{code:"Paladin",display:"圣骑士",color:"#f48cba"},{code:"Rogue",display:"潜行者",color:"#fff468"}],Et={name:"FormulaSetting",comments:{VDivider:_t["a"],VSwitch:St["a"],VSlider:Z["a"],VIcon:y["a"],VContainer:m["a"],VToolbar:tt["a"],VToolbarTitle:f["a"],VCard:et["a"],VCardTitle:at["c"],VCardActions:at["a"],VCardText:at["b"],VSimpleTable:it["a"],VSelect:rt["a"],VDialog:st["a"],VTabs:lt["a"],VTabsSlider:nt["a"],VTab:ot["a"],VSpacer:b["a"]},data:function(){return{classes:Ot,selectedClassIndex:0,formulaEditor:!1,subgroupEditor:!1,typeSelect:Object.values(F).map((function(t){return{text:k[t],value:t}})),FORMULA_TYPE_TEXT:k,editFormula:{displayName:"",edit:!1,weight:1,subGroups:[]},editSubgroupIdx:{formulaIdx:-1,subgroupIdx:-1},editSubgroup:{tableIds:[{id:"DAMAGE",amplifier:1}],weight:1,type:F.RELATIVE_TO_TOP},editFormulaMode:"edit",editSubgroupMode:"edit"}},computed:Object(u["a"])(Object(u["a"])({},Object(_["c"])("config",["tables","allFormulas"])),{},{tableSelect:function(){return this.tables.map((function(t){return{text:t.displayName,value:t.id}}))},selectedClass:function(){return this.classes[this.selectedClassIndex].code},formulas:function(){var t=this,e=this.allFormulas.find((function(e){return e.classType===t.selectedClass}));return e["formulas"]}}),methods:Object(u["a"])(Object(u["a"])({},Object(_["b"])("config",["insertFormula","deleteFormula","resetFormula","insertSubgroup","updateSubgroup","deleteSubgroup"])),{},{openEditSubgroup:function(t,e){this.editSubgroup=Object.assign({},this.formulas[t].subGroups[e]),this.editSubgroupIdx={formulaIdx:t,subgroupIdx:e},this.editSubgroupMode="edit",this.subgroupEditor=!0},newFormula:function(){this.editFormula={displayName:"",edit:!1,weight:1,subGroups:[]},this.editFormulaMode="new",this.formulaEditor=!0},newSubgroup:function(t){this.editSubgroup={tableIds:[{id:"DAMAGE",amplifier:1}],weight:1,type:F.RELATIVE_TO_TOP},this.editSubgroupIdx.formulaIdx=t,this.editSubgroupMode="new",this.subgroupEditor=!0},addTable:function(){this.editSubgroup.tableIds.push({id:"DAMAGE",amplifier:1})},deleteTable:function(t){this.editSubgroup.tableIds.splice(t,1)},saveFormula:function(){this.insertFormula({classType:this.selectedClass,formula:this.editFormula}),this.formulaEditor=!1},saveSubgroup:function(){"new"===this.editSubgroupMode?this.insertSubgroup(Object(u["a"])(Object(u["a"])({classType:this.selectedClass},this.editSubgroupIdx),{},{newSubgroup:Object(u["a"])(Object(u["a"])({},this.editSubgroup),{},{max:parseInt(this.editSubgroup.max)})})):"edit"===this.editSubgroupMode&&this.updateSubgroup(Object(u["a"])(Object(u["a"])({classType:this.selectedClass},this.editSubgroupIdx),{},{subgroup:Object(u["a"])(Object(u["a"])({},this.editSubgroup),{},{max:parseInt(this.editSubgroup.max)})})),this.subgroupEditor=!1}})},It=Et,xt=Object(bt["a"])(It,gt,yt,!1,null,null,null),Vt=xt.exports;ft()(xt,{VBtn:g["a"],VCard:et["a"],VCardActions:at["a"],VCardText:at["b"],VCardTitle:at["c"],VCol:mt["a"],VContainer:m["a"],VDialog:st["a"],VDivider:_t["a"],VIcon:y["a"],VRow:vt["a"],VSelect:rt["a"],VSimpleTable:it["a"],VSlider:Z["a"],VSpacer:b["a"],VSwitch:St["a"],VTab:ot["a"],VTabs:lt["a"],VTabsSlider:nt["a"],VTextField:h["a"]});var At={name:"Setting",components:{TableSetting:ht,FormulaSetting:Vt,VToolbar:tt["a"],VToolbarTitle:f["a"],VCard:et["a"],VTabs:lt["a"],VTabsSlider:nt["a"],VTab:ot["a"]},data:function(){return{tab:0}}},wt=At,Nt=(a("31ed"),a("c671")),Ct=a("aac8"),Lt=Object(bt["a"])(wt,Y,K,!1,null,null,null),Rt=Lt.exports;ft()(Lt,{VCard:et["a"],VTab:ot["a"],VTabItem:Nt["a"],VTabs:lt["a"],VTabsItems:Ct["a"],VTabsSlider:nt["a"],VToolbar:tt["a"],VToolbarTitle:f["a"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",[a("v-btn",{attrs:{small:""},on:{click:t.download}},[a("v-icon",[t._v("mdi-download")]),t._v(" XLXS ")],1)],1)],1),t.scores.length>0?[a("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.items,"items-per-page":20,"hide-default-footer":""}})]:t._e(),a("v-list",{staticClass:"mt-5",attrs:{width:"100%"}},t._l(t.scores,(function(e){return a("v-list-group",{key:e.id,scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.name)+" - "+t._s(Math.round(100*e.totalScore)/100))])],1)]},proxy:!0}],null,!0)},t._l(e.detailScore,(function(i,r){return a("v-list-group",{key:e.id+"-"+r,attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(i.displayName)+" - "+t._s(Math.round(100*i.score)/100))])],1)],1)]},proxy:!0}],null,!0)},t._l(i.subGroups,(function(i,r){return a("v-list-item",{key:e.id+"-"+r,on:{click:function(e){return t.$emit("openTable",i.subgroupTable)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(i.tableName)+" - "+t._s(Math.round(100*i.score)/100))])],1)],1)})),1)})),1)})),1)],2)},Ft=[],kt=(a("4160"),a("c975"),a("b0c0"),a("159b"),a("8fea")),Mt=a("8860"),Gt=a("56b0"),Bt=a("da13"),Ut=a("5d23"),Dt=a("1146"),Pt=a.n(Dt),Wt={name:"ScoreTable",components:{VDataTable:kt["a"],VList:Mt["a"],VListGroup:Gt["a"],VListItem:Bt["a"],VListItemContent:Ut["a"],VListItemTitle:Ut["b"]},props:{scores:{type:Array,required:!0},reportId:{type:String,required:!0},classType:{type:String,required:!0}},computed:{headers:function(){if(this.scores.length>0){var t=[{text:"名字",align:"start",sortable:!1,value:"name"},{text:"总分",value:"totalScore"}];return t.concat.apply(t,Object(o["a"])(this.scores[0].detailScore.map((function(t){var e,a={text:t.displayName,value:"group-".concat(t.displayName),weight:t.weight},i=t.subGroups.map((function(t){return{text:t.tableName,value:"sub-".concat(t.tableName),weight:t.weight}}));return(e=[a]).concat.apply(e,Object(o["a"])(i))}))))}return[]},items:function(){return this.scores.map((function(t){var e={name:t.name,totalScore:Math.round(100*t.totalScore)/100};return t.detailScore.reduce((function(t,e){return t["group-".concat(e.displayName)]=Math.round(100*e.score)/100,e.subGroups.reduce((function(t,e){return t["sub-".concat(e.tableName)]=Math.round(100*e.score)/100,t}),t),t}),e),e}))}},methods:{download:function(){for(var t=this,e="".concat(this.reportId,".xlsx"),a=this.headers.map((function(t){return t.text})),i=this.items.map((function(e){return t.headers.map((function(t){return e[t.value]}))})),r=[a].concat(i),s=Pt.a.utils.book_new(),l=Pt.a.utils.aoa_to_sheet(r),n=[],o=null,c=2;c<this.headers.length;c++){var u=this.headers[c];0===u.value.indexOf("group")?(o={idx:c,weight:u.weight,subLayers:[]},n.push(o)):0===u.value.indexOf("sub")&&o.subLayers.push({idx:c,weight:u.weight})}var d=n.map((function(t){return"".concat(String.fromCharCode(65+t.idx),"{playerIdx}*").concat(t.weight)})).join("+"),b="ROUND(".concat(d,",3)"),p=n.map((function(t){var e=t.subLayers.map((function(t){return"".concat(String.fromCharCode(65+t.idx),"{playerIdx}*").concat(t.weight)})).join("+");return{idx:t.idx,formula:"ROUND(".concat(e,",3)")}}));this.items.map((function(t,e){var a="B".concat(e+2);l[a]={f:b.replaceAll("{playerIdx}",e+2)},p.forEach((function(t){var a="".concat(String.fromCharCode(65+t.idx)).concat(e+2);l[a]={f:t.formula.replaceAll("{playerIdx}",e+2)}}))})),console.log(l),Pt.a.utils.book_append_sheet(s,l,this.classType),Pt.a.writeFile(s,e)}}},Qt=Wt,Xt=Object(bt["a"])(Qt,jt,Ft,!1,null,null,null),Ht=Xt.exports;ft()(Xt,{VBtn:g["a"],VCol:mt["a"],VDataTable:kt["a"],VIcon:y["a"],VList:Mt["a"],VListGroup:Gt["a"],VListItem:Bt["a"],VListItemContent:Ut["a"],VListItemTitle:Ut["b"],VRow:vt["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"settings",attrs:{elevation:"4",width:"100%",height:"100%"}},[a("v-toolbar",[a("v-toolbar-title",[t._v(" "+t._s(t.table.tableName)+" ")])],1),a("v-container",{attrs:{fluid:""}},[a("v-simple-table",{attrs:{"fixed-header":"",height:"500px"},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("名字")]),a("th",{staticClass:"text-left"},[t._v("百分条")]),a("th",{staticClass:"text-left"},[t._v("数值")])])]),a("tbody",t._l(t.table.entries,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",{staticStyle:{width:"600px"}},[a("div",{staticClass:"primary",staticStyle:{height:"25px"},style:{width:e.total/t.table.TOP*580+"px"}})]),a("td",[t._v(t._s(e.total))])])})),0)]},proxy:!0}])})],1)],1)},Jt=[],Yt={name:"WclTable",components:{VContainer:m["a"],VToolbar:tt["a"],VToolbarTitle:f["a"],VSimpleTable:it["a"],VCard:et["a"]},props:{table:{type:Object,required:!0}},methods:{}},Kt=Yt,qt=Object(bt["a"])(Kt,$t,Jt,!1,null,null,null),zt=qt.exports;ft()(qt,{VCard:et["a"],VContainer:m["a"],VSimpleTable:it["a"],VToolbar:tt["a"],VToolbarTitle:f["a"]});var Zt=[{id:"DAMAGE",predefined:!0,displayName:"全程伤害",tableName:I.DAMAGE,fights:x.OVERALL,column:V.TOTAL,abilityIds:[],customQuery:""},{id:"TEAMMATE-DAMAGE",predefined:!0,displayName:"队友误伤",tableName:I.DAMAGE_TAKEN,fights:x.OVERALL,column:V.TOTAL,abilityIds:[],customQuery:"hostility=1&sourceclass=Player&target=Player&by=target"},{id:"27-BUGS",predefined:!0,displayName:"27虫",tableName:I.CASTS,fights:x.BEFORE_THREE,column:V.TOTAL,abilityIds:[1161,3169],customQuery:""},{id:"TRAP-ROOM-ACCELERATE",predefined:!0,displayName:"陷阱房加速",tableName:I.CASTS,fights:x.BEFORE_FOUR,column:V.TOTAL,abilityIds:[9175,14530],customQuery:""},{id:"BEE-ROOM-POTION",predefined:!0,displayName:"蜜蜂房自由",tableName:I.CASTS,fights:x.BEFORE_SIX,column:V.TOTAL,abilityIds:[6615],customQuery:""},{id:"DAMAGE-TAKEN",predefined:!0,displayName:"全程承伤",tableName:I.DAMAGE_TAKEN,fights:x.OVERALL,column:V.TOTAL,abilityIds:[],customQuery:""},{id:"HEALING",predefined:!0,displayName:"全程自疗",tableName:I.HEALING,fights:x.OVERALL,column:V.TOTAL,abilityIds:[],customQuery:""},{id:"WORLD-BUFFS",predefined:!0,displayName:"世界BUFFS",tableName:I.BUFFS,fights:x.OVERALL,column:V.BUFF_TOTAL,abilityIds:[15366,22888,22818,24425,22817,16609],customQuery:""},{id:"TRUE-SHOT-AURA",predefined:!0,displayName:"强击光环",tableName:I.BUFFS,fights:x.OVERALL,column:V.BUFF_TOTAL,abilityIds:[20906]},{id:"DUMMY-TARGET",predefined:!0,displayName:"高级活动假人",tableName:I.CASTS,fights:x.OVERALL,column:V.TOTAL,abilityIds:[19805],customQuery:""},{id:"SUNDERS",predefined:!0,displayName:"破甲",tableName:I.CASTS,fights:x.OVERALL,column:V.TOTAL,abilityIds:[11597],customQuery:""},{id:"VIS",predefined:!0,displayName:"维希度斯冰箭",tableName:I.DAMAGE,fights:x.FIVE,column:V.HIT,abilityIds:[13439,205],customQuery:""},{id:"petrification",predefined:!0,displayName:"化石",tableName:I.CASTS,fights:x.OVERALL,column:V.TOTAL,abilityIds:[17624],customQuery:""},{id:"poison",predefined:!0,displayName:"抗毒药剂",tableName:I.CASTS,fights:x.OVERALL,column:V.TOTAL,abilityIds:[26677],customQuery:""},{id:"death-wish-1",predefined:!0,displayName:"老1前死愿+鲁莽",tableName:I.CASTS,fights:x.BEFORE_ONE,column:V.TOTAL,abilityIds:[12328,-1719],customQuery:""},{id:"death-wish-2",predefined:!0,displayName:"三宝前死愿",tableName:I.CASTS,fights:x.BEFORE_TWO,column:V.TOTAL,abilityIds:[12328],customQuery:""},{id:"death-wish-3",predefined:!0,displayName:"沙尔图拉死愿",tableName:I.CASTS,fights:x.THREE,column:V.TOTAL,abilityIds:[12328],customQuery:""},{id:"death-wish-4",predefined:!0,displayName:"哈霍兰死愿",tableName:I.CASTS,fights:x.SIX,column:V.TOTAL,abilityIds:[12328],customQuery:""},{id:"death-wish-5",predefined:!0,displayName:"奥罗死愿鲁莽",tableName:I.CASTS,fights:x.EIGHT,column:V.TOTAL,abilityIds:[12328,-1719],customQuery:""}];function te(t,e){return Object.values(t).map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{entries:t.entries.filter((function(t){return e.has(t.id)}))})})).reduce((function(t,e){return t[e.tableId]=e,t}),{})}var ee={name:"App",components:{ScoreTable:Ht,VAppBar:d["a"],VSpacer:b["a"],VSlideYTransition:p["g"],VToolbarTitle:f["a"],VContainer:m["a"],VMain:v["a"],VFooter:T["a"],VTextField:h["a"],VBtn:g["a"],Setting:Rt,WclTable:zt,VIcon:y["a"]},data:function(){return{openSetting:!1,openTable:!1,table:{},loading:!1,title:"Classic WCL Analyzer",footer:"Powered by To God be the Glory",reportId:"apz2cHtjXKBvYR8r",selectedClassIndex:0,classes:Ot,scores:[]}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(_["c"])("config",["tables","allFormulas"])),Object(_["c"])("report",["friendlies","fights","tableEntries"])),{},{selectedClass:function(){return this.classes[this.selectedClassIndex].code}}),watch:{openSetting:function(){this.save()}},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(_["b"])("report",["setReport","setTableEntries","setFriendlies"])),Object(_["b"])("config",["save"])),{},{openTablePanel:function(t){this.openTable=!0,this.table=t},fetchReport:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i,r,s,l,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,w(t.reportId);case 3:return s=e.sent,t.setReport(s),e.next=7,C(t.reportId,I.DAMAGE_TAKEN,t.fights[x.OVERALL].start_time,t.fights[x.OVERALL].end_time,V.TOTAL,{abilityId:"1"});case 7:return l=e.sent,t.setFriendlies(l),n=new Set((a=[]).concat.apply(a,Object(o["a"])((i=[]).concat.apply(i,Object(o["a"])((r=[]).concat.apply(r,Object(o["a"])(t.allFormulas.map((function(t){return t.formulas})))).map((function(t){return t.subGroups})))).map((function(t){return t.tableIds.map((function(t){return t.id}))}))))),e.next=12,t.fetchTables(Array.from(n));case 12:return e.next=14,t.calcScores();case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e)})))()},fetchTables:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(t.map(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var i,r,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.tables.find((function(t){return t.id===a})),r=e.fights[i.fights],!(i.abilityIds.length>0)){t.next=9;break}return t.next=5,Promise.all(i.abilityIds.map((function(t){return C(e.reportId,i.tableName,r["start_time"],r["end_time"],i.column,{abilityId:t,customQuery:i.customQuery})})));case 5:return s=t.sent,t.abrupt("return",{tableId:a,tableName:i.displayName,entries:"WORLD-BUFFS"===a?j(s):R(s)});case 9:return t.next=11,C(e.reportId,i.tableName,r["start_time"],r["end_time"],i.column,{customQuery:i.customQuery});case 11:return l=t.sent,t.abrupt("return",{tableId:a,tableName:i.displayName,entries:l});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:i=a.sent,e.setTableEntries(i);case 4:case"end":return a.stop()}}),a)})))()},calcScores:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.scores=t.allFormulas.map((function(e){var a=e.classType,i=e.formulas,r=J(i),s=t.friendlies.filter((function(t){return t.type===a})),l=te(t.tableEntries,new Set(s.map((function(t){return t.id})))),n=r.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{subGroups:e.subGroups.map((function(e){for(var a={},i=function(t){var i=e.tableIds[t],r=l[i.id].entries;r.reduce((function(t,e){return void 0===t[e.id]?(t[e.id]=e,t[e.id]["total"]=e["total"]*i["amplifier"]):t[e.id]["total"]=t[e.id]["total"]+e["total"]*i["amplifier"],t}),a)},r=0;r<e.tableIds.length;r++)i(r);var s=Object.values(a).sort((function(t,e){return e.total-t.total})),n=e.tableIds.map((function(e){return"".concat(void 0!==e.amplifier?"("+e.amplifier+")  x":"").concat(t.tables.find((function(t){return t.id===e.id})).displayName)})).join(" + "),o=s.map((function(t){return t.total})).reduce((function(t,e){return t+e}),0),c=o/s.entries.length,d=s.map((function(t){return t.total})).reduce((function(t,e){return e>t?e:t}),0);return Object(u["a"])(Object(u["a"])({},e),{},{subgroupTable:{entries:s,tableName:n,TOTAL:o,AVG:c,TOP:d}})}))})})),o=s.map((function(t){var e=n.map((function(e){var a=e.subGroups.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{tableName:e.subgroupTable.tableName,score:function(){var a=e.subgroupTable,i=a.entries.find((function(e){return e.id===t.id})),r=void 0===i?0:i.total,s=0;switch(e.type){case F.RELATIVE_TO_MAX:s=Math.min(r,e.max)/e.max;break;case F.RELATIVE_TO_TOP:s=r/a.TOP;break;case F.RELATIVE_TO_AVG:s=r/a.AVG;break;case F.RELATIVE_TO_TOTAL:s=r/a.TOTAL;break;case F.UNITARY:s=r>0?1:0;break}return e.reverse?1-s:s}()})}));return Object(u["a"])(Object(u["a"])({},e),{},{score:a.reduce((function(t,e){return t+e.weight*e.score}),0),subGroups:a})}));return Object(u["a"])(Object(u["a"])({},t),{},{totalScore:e.reduce((function(t,e){return t+e.weight*e.score}),0),detailScore:e})}));return o.sort((function(t,e){return e.totalScore-t.totalScore})),{classType:a,scores:o}}));case 1:case"end":return e.stop()}}),e)})))()}})},ae=ee,ie=a("7496"),re=Object(bt["a"])(ae,l,n,!1,null,null,null),se=re.exports;ft()(re,{VApp:ie["a"],VAppBar:d["a"],VBtn:g["a"],VCol:mt["a"],VContainer:m["a"],VDialog:st["a"],VFooter:T["a"],VIcon:y["a"],VMain:v["a"],VRow:vt["a"],VSlideYTransition:p["g"],VSpacer:b["a"],VTab:ot["a"],VTabs:lt["a"],VTabsSlider:nt["a"],VTextField:h["a"],VToolbarTitle:f["a"]});a("c740"),a("fb6a");var le=function(){return{tables:localStorage.getItem("gloryWCLSetting-tables")?JSON.parse(localStorage.getItem("gloryWCLSetting-tables")):Zt.slice(),allFormulas:localStorage.getItem("gloryWCLSetting-formulas")?JSON.parse(localStorage.getItem("gloryWCLSetting-formulas")):$.slice()}},ne={},oe={},ce={save:function(t){localStorage.setItem("gloryWCLSetting-tables",JSON.stringify(t.tables)),localStorage.setItem("gloryWCLSetting-formulas",JSON.stringify(t.allFormulas))},updateTable:function(t,e){var a=t.tables.findIndex((function(t){return t.id===e.id}));i["default"].set(t.tables,a,e),localStorage.setItem("gloryWCLSetting-tables",JSON.stringify(t.tables))},insertTable:function(t,e){t.tables.push(e),localStorage.setItem("gloryWCLSetting-tables",JSON.stringify(t.tables))},deleteTable:function(t,e){var a=t.tables.findIndex((function(t){return t.id===e}));t.tables.splice(a,1),localStorage.setItem("gloryWCLSetting-tables",JSON.stringify(t.tables))},resetTable:function(t){t.tables=Zt.slice(),localStorage.setItem("gloryWCLSetting-tables",JSON.stringify(t.tables))},insertFormula:function(t,e){var a=e.classType,i=e.formula;t.allFormulas.find((function(t){return t.classType===a}))["formulas"].unshift(i),localStorage.setItem("gloryWCLSetting-formulas",JSON.stringify(t.allFormulas))},deleteFormula:function(t,e){var a=e.classType,i=e.formulaIdx;t.allFormulas.find((function(t){return t.classType===a}))["formulas"].splice(i,1),localStorage.setItem("gloryWCLSetting-formulas",JSON.stringify(t.allFormulas))},resetFormula:function(t){t.allFormulas=$.slice(),localStorage.setItem("gloryWCLSetting-formulas",JSON.stringify(t.allFormulas))},insertSubgroup:function(t,e){var a=e.classType,i=e.formulaIdx,r=e.newSubgroup;t.allFormulas.find((function(t){return t.classType===a}))["formulas"][i].subGroups.unshift(r),localStorage.setItem("gloryWCLSetting-formulas",JSON.stringify(t.allFormulas))},updateSubgroup:function(t,e){var a=e.classType,r=e.formulaIdx,s=e.subgroupIdx,l=e.subgroup;i["default"].set(t.allFormulas.find((function(t){return t.classType===a}))["formulas"][r].subGroups,s,l),localStorage.setItem("gloryWCLSetting-formulas",JSON.stringify(t.allFormulas))},deleteSubgroup:function(t,e){var a=e.classType,i=e.formulaIdx,r=e.subgroupIdx;t.allFormulas.find((function(t){return t.classType===a}))["formulas"][i].subGroups.splice(r,1),localStorage.setItem("gloryWCLSetting-formulas",t.allFormulas)}},ue={namespaced:!0,state:le,getters:ne,actions:oe,mutations:ce},de=function(){return{fights:{},friendlies:[],enemies:[],tableEntries:{}}},be={},pe={setFriendlies:function(t,e){var a=new Set(e.sort((function(t,e){return e["total"]-t["total"]})).splice(0,3).map((function(t){return t["id"]})));t.friendlies=t.friendlies.map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{type:a.has(t["id"])?"Tank":t["type"]})}))},setReport:function(t,e){t.friendlies=[],t.fights={};for(var a=0;a<e.friendlies.length;a++){var i=e.friendlies[a];t.friendlies[i.id]=i}t.fights[x.OVERALL]={start_time:e.fights[0]["start_time"],end_time:e.fights[e.fights.length-1]["end_time"]};var r=new Set(Object.values(x));e.fights.forEach((function(e){var a=r.has(e.name)?e.name:"".concat(e.name,"-").concat(e.id);t.fights[a]=e})),t.fights[x.BEFORE_ONE]={start_time:t.fights[x.OVERALL].start_time+1,end_time:t.fights[x.ONE].start_time-1},t.fights[x.BEFORE_TWO]={start_time:t.fights[x.ONE].end_time+1,end_time:t.fights[x.TWO].start_time-1},t.fights[x.BEFORE_THREE]={start_time:t.fights[x.TWO].end_time+1,end_time:t.fights[x.THREE].start_time-1},t.fights[x.BEFORE_FOUR]={start_time:t.fights[x.THREE].end_time+1,end_time:t.fights[x.FOUR].start_time-1},t.fights[x.BEFORE_SIX]={start_time:t.fights[x.FIVE].end_time+1,end_time:t.fights[x.SIX].start_time-1},t.fights[x.BEFORE_SEVEN]={start_time:t.fights[x.SIX].end_time+1,end_time:t.fights[x.SEVEN].start_time-1},t.fights[x.BEFORE_EIGHT]={start_time:t.fights[x.SEVEN].end_time+1,end_time:t.fights[x.EIGHT].start_time-1}},setTableEntries:function(t,e){t.tableEntries=Object(u["a"])(Object(u["a"])({},t.tableEntries),e.reduce((function(t,e){return t[e.tableId]=e,t}),{}))}},fe={},me={namespaced:!0,state:de,getters:be,actions:fe,mutations:pe};i["default"].use(_["a"]);var ve=new _["a"].Store({modules:{config:ue,report:me}}),Te=(a("bf40"),a("fcf4"));i["default"].config.productionTip=!1,i["default"].use(s.a),i["default"].use(_["a"]),new i["default"]({store:ve,vuetify:new s.a({theme:{dark:!0,themes:{dark:{primary:Te["a"].yellow.darken3,accent:Te["a"].red.darken3}}}}),render:function(t){return t(se)}}).$mount("#app")},"8e4e":function(t,e,a){}});
//# sourceMappingURL=app.43cb0f36.js.map